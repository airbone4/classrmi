<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 2 data type | test for class</title>
  <meta name="description" content="web article test">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 2 data type | test for class />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="web article test" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 data type | test for class />
  
  <meta name="twitter:description" content="web article test" />
  

<meta name="author" content="lend jwj cen">


<meta name="date" content="2018-12-20">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="regular-expression-syntax.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="adv-r.css" type="text/css" />
<link rel="stylesheet" href="tableStyle.css" type="text/css" />
<link rel="stylesheet" href="toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">testing </a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 簡介</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#section-1.1"><i class="fa fa-check"></i><b>1.1</b> 網路資源</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#section-1.2"><i class="fa fa-check"></i><b>1.2</b> 安裝軟體</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#update-package"><i class="fa fa-check"></i><b>1.2.1</b> 自動update package</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#quick-view"><i class="fa fa-check"></i><b>1.3</b> quick view</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#section-1.4"><i class="fa fa-check"></i><b>1.4</b> 資料型態和內容</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#section-1.4.1"><i class="fa fa-check"></i><b>1.4.1</b> 編輯/瀏覽資料</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#section-1.4.2"><i class="fa fa-check"></i><b>1.4.2</b> 個別欄位</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#section-1.4.3"><i class="fa fa-check"></i><b>1.4.3</b> 質性數據的分析</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#assignment"><i class="fa fa-check"></i><b>1.5</b> assignment</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-type.html"><a href="data-type.html"><i class="fa fa-check"></i><b>2</b> data type</a><ul>
<li class="chapter" data-level="2.1" data-path="data-type.html"><a href="data-type.html#section-2.1"><i class="fa fa-check"></i><b>2.1</b> 基本操作</a><ul>
<li class="chapter" data-level="2.1.1" data-path="data-type.html"><a href="data-type.html#section-2.1.1"><i class="fa fa-check"></i><b>2.1.1</b> 指派</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-type.html"><a href="data-type.html#section-2.2"><i class="fa fa-check"></i><b>2.2</b> 運算</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-type.html"><a href="data-type.html#section-2.2.1"><i class="fa fa-check"></i><b>2.2.1</b> 四則運算</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-type.html"><a href="data-type.html#logical"><i class="fa fa-check"></i><b>2.2.2</b> Logical</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-type.html"><a href="data-type.html#r"><i class="fa fa-check"></i><b>2.2.3</b> R語言常用邏輯運算子</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-type.html"><a href="data-type.html#section-2.2.4"><i class="fa fa-check"></i><b>2.2.4</b> 邏輯函數</a></li>
<li class="chapter" data-level="2.2.5" data-path="data-type.html"><a href="data-type.html#section-2.2.5"><i class="fa fa-check"></i><b>2.2.5</b> 資源</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-type.html"><a href="data-type.html#section-2.3"><i class="fa fa-check"></i><b>2.3</b> 介紹</a></li>
<li class="chapter" data-level="2.4" data-path="data-type.html"><a href="data-type.html#section-2.4"><i class="fa fa-check"></i><b>2.4</b> 實數的比較</a></li>
<li class="chapter" data-level="2.5" data-path="data-type.html"><a href="data-type.html#section-2.5"><i class="fa fa-check"></i><b>2.5</b> 字串</a><ul>
<li class="chapter" data-level="2.5.1" data-path="data-type.html"><a href="data-type.html#section-2.5.1"><i class="fa fa-check"></i><b>2.5.1</b> 建立字串</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-type.html"><a href="data-type.html#section-2.5.2"><i class="fa fa-check"></i><b>2.5.2</b> 空字串</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data-type.html"><a href="data-type.html#is-family"><i class="fa fa-check"></i><b>2.6</b> 型態操作is family</a></li>
<li class="chapter" data-level="2.7" data-path="data-type.html"><a href="data-type.html#vector"><i class="fa fa-check"></i><b>2.7</b> vector</a><ul>
<li class="chapter" data-level="2.7.1" data-path="data-type.html"><a href="data-type.html#section-2.7.1"><i class="fa fa-check"></i><b>2.7.1</b> 練習範例</a></li>
<li class="chapter" data-level="2.7.2" data-path="data-type.html"><a href="data-type.html#vector-"><i class="fa fa-check"></i><b>2.7.2</b> vector 相關的運算</a></li>
<li class="chapter" data-level="2.7.3" data-path="data-type.html"><a href="data-type.html#vector"><i class="fa fa-check"></i><b>2.7.3</b> 如何存取vector中的元素</a></li>
<li class="chapter" data-level="2.7.4" data-path="data-type.html"><a href="data-type.html#section-2.7.4"><i class="fa fa-check"></i><b>2.7.4</b> 邏輯做為索引</a></li>
<li class="chapter" data-level="2.7.5" data-path="data-type.html"><a href="data-type.html#-character-vector-"><i class="fa fa-check"></i><b>2.7.5</b> 利用字串( character vector) 作為索引</a></li>
<li class="chapter" data-level="2.7.6" data-path="data-type.html"><a href="data-type.html#how-to-modify-a-vector-in-r"><i class="fa fa-check"></i><b>2.7.6</b> How to modify a vector in R?</a></li>
<li class="chapter" data-level="2.7.7" data-path="data-type.html"><a href="data-type.html#how-to-delete-a-vector"><i class="fa fa-check"></i><b>2.7.7</b> How to delete a Vector?</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="data-type.html"><a href="data-type.html#list"><i class="fa fa-check"></i><b>2.8</b> List</a><ul>
<li class="chapter" data-level="2.8.1" data-path="data-type.html"><a href="data-type.html#-list"><i class="fa fa-check"></i><b>2.8.1</b> 建立 List</a></li>
<li class="chapter" data-level="2.8.2" data-path="data-type.html"><a href="data-type.html#-list-"><i class="fa fa-check"></i><b>2.8.2</b> 存取 List 元素</a></li>
<li class="chapter" data-level="2.8.3" data-path="data-type.html"><a href="data-type.html#manipulating-list-elements"><i class="fa fa-check"></i><b>2.8.3</b> Manipulating List Elements</a></li>
<li class="chapter" data-level="2.8.4" data-path="data-type.html"><a href="data-type.html#merging-lists"><i class="fa fa-check"></i><b>2.8.4</b> Merging Lists</a></li>
<li class="chapter" data-level="2.8.5" data-path="data-type.html"><a href="data-type.html#list--vector"><i class="fa fa-check"></i><b>2.8.5</b> List 轉 Vector</a></li>
<li class="chapter" data-level="2.8.6" data-path="data-type.html"><a href="data-type.html#vector-list"><i class="fa fa-check"></i><b>2.8.6</b> 比較vector, list中,字串的問題</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="data-type.html"><a href="data-type.html#data-set-build-in"><i class="fa fa-check"></i><b>2.9</b> data set build in</a><ul>
<li class="chapter" data-level="2.9.1" data-path="data-type.html"><a href="data-type.html#list-of-pre-loaded-data"><i class="fa fa-check"></i><b>2.9.1</b> List of pre-loaded data</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="data-type.html"><a href="data-type.html#vector-"><i class="fa fa-check"></i><b>2.10</b> vector 函數範例</a><ul>
<li class="chapter" data-level="2.10.1" data-path="data-type.html"><a href="data-type.html#cbindrbind"><i class="fa fa-check"></i><b>2.10.1</b> cbind,rbind</a></li>
<li class="chapter" data-level="2.10.2" data-path="data-type.html"><a href="data-type.html#diff"><i class="fa fa-check"></i><b>2.10.2</b> 函數diff</a></li>
</ul></li>
<li class="chapter" data-level="2.11" data-path="data-type.html"><a href="data-type.html#-"><i class="fa fa-check"></i><b>2.11</b> 練習: 刪除向量中的一個元素</a><ul>
<li class="chapter" data-level="2.11.1" data-path="data-type.html"><a href="data-type.html#adding-attributes-to-vectors"><i class="fa fa-check"></i><b>2.11.1</b> <span>Adding Attributes to Vectors</span></a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="data-type.html"><a href="data-type.html#matrix"><i class="fa fa-check"></i><b>2.12</b> matrix</a><ul>
<li class="chapter" data-level="2.12.1" data-path="data-type.html"><a href="data-type.html#transpose"><i class="fa fa-check"></i><b>2.12.1</b> Transpose</a></li>
<li class="chapter" data-level="2.12.2" data-path="data-type.html"><a href="data-type.html#section-2.12.2"><i class="fa fa-check"></i><b>2.12.2</b> 合併矩陣</a></li>
</ul></li>
<li class="chapter" data-level="2.13" data-path="data-type.html"><a href="data-type.html#section-2.13"><i class="fa fa-check"></i><b>2.13</b> 字串函數</a><ul>
<li class="chapter" data-level="2.13.1" data-path="data-type.html"><a href="data-type.html#macro"><i class="fa fa-check"></i><b>2.13.1</b> 應用範例macro</a></li>
<li class="chapter" data-level="2.13.2" data-path="data-type.html"><a href="data-type.html#paste"><i class="fa fa-check"></i><b>2.13.2</b> paste</a></li>
<li class="chapter" data-level="2.13.3" data-path="data-type.html"><a href="data-type.html#misc"><i class="fa fa-check"></i><b>2.13.3</b> misc</a></li>
</ul></li>
<li class="chapter" data-level="2.14" data-path="data-type.html"><a href="data-type.html#factors"><i class="fa fa-check"></i><b>2.14</b> Factors</a><ul>
<li class="chapter" data-level="2.14.1" data-path="data-type.html"><a href="data-type.html#factors"><i class="fa fa-check"></i><b>2.14.1</b> 探索一下factors</a></li>
<li class="chapter" data-level="2.14.2" data-path="data-type.html"><a href="data-type.html#factor"><i class="fa fa-check"></i><b>2.14.2</b> 探索一下factor</a></li>
<li class="chapter" data-level="2.14.3" data-path="data-type.html"><a href="data-type.html#factor-read.csv"><i class="fa fa-check"></i><b>2.14.3</b> factor 和函數read.csv()</a></li>
<li class="chapter" data-level="2.14.4" data-path="data-type.html"><a href="data-type.html#factor-summary"><i class="fa fa-check"></i><b>2.14.4</b> factor 和函數summary()</a></li>
</ul></li>
<li class="chapter" data-level="2.15" data-path="data-type.html"><a href="data-type.html#data-frames"><i class="fa fa-check"></i><b>2.15</b> Data Frames</a><ul>
<li class="chapter" data-level="2.15.1" data-path="data-type.html"><a href="data-type.html#data.frame"><i class="fa fa-check"></i><b>2.15.1</b> 簡單介紹一下手動建立data.frame</a></li>
<li class="chapter" data-level="2.15.2" data-path="data-type.html"><a href="data-type.html#data-frame-"><i class="fa fa-check"></i><b>2.15.2</b> data frame 的常用函數：</a></li>
</ul></li>
<li class="chapter" data-level="2.16" data-path="data-type.html"><a href="data-type.html#tables"><i class="fa fa-check"></i><b>2.16</b> Tables</a><ul>
<li class="chapter" data-level="2.16.1" data-path="data-type.html"><a href="data-type.html#one-way-tables"><i class="fa fa-check"></i><b>2.16.1</b> One Way Tables</a></li>
<li class="chapter" data-level="2.16.2" data-path="data-type.html"><a href="data-type.html#two-way-tables"><i class="fa fa-check"></i><b>2.16.2</b> Two Way Tables</a></li>
</ul></li>
<li class="chapter" data-level="2.17" data-path="data-type.html"><a href="data-type.html#oop"><i class="fa fa-check"></i><b>2.17</b> OOP</a><ul>
<li class="chapter" data-level="2.17.1" data-path="data-type.html"><a href="data-type.html#section-2.17.1"><i class="fa fa-check"></i><b>2.17.1</b> 變數屬性查詢函數</a></li>
</ul></li>
<li class="chapter" data-level="2.18" data-path="data-type.html"><a href="data-type.html#operator"><i class="fa fa-check"></i><b>2.18</b> operator %&gt;%</a></li>
<li class="chapter" data-level="2.19" data-path="data-type.html"><a href="data-type.html#apply-family"><i class="fa fa-check"></i><b>2.19</b> apply family</a><ul>
<li class="chapter" data-level="2.19.1" data-path="data-type.html"><a href="data-type.html#apply"><i class="fa fa-check"></i><b>2.19.1</b> apply</a></li>
<li class="chapter" data-level="2.19.2" data-path="data-type.html"><a href="data-type.html#lapply"><i class="fa fa-check"></i><b>2.19.2</b> lapply函數</a></li>
<li class="chapter" data-level="2.19.3" data-path="data-type.html"><a href="data-type.html#sapply"><i class="fa fa-check"></i><b>2.19.3</b> sapply函數</a></li>
<li class="chapter" data-level="2.19.4" data-path="data-type.html"><a href="data-type.html#section-2.19.4"><i class="fa fa-check"></i><b>2.19.4</b> 比較</a></li>
<li class="chapter" data-level="2.19.5" data-path="data-type.html"><a href="data-type.html#vapply"><i class="fa fa-check"></i><b>2.19.5</b> vapply函數</a></li>
<li class="chapter" data-level="2.19.6" data-path="data-type.html"><a href="data-type.html#mapply"><i class="fa fa-check"></i><b>2.19.6</b> mapply函數</a></li>
<li class="chapter" data-level="2.19.7" data-path="data-type.html"><a href="data-type.html#tapply"><i class="fa fa-check"></i><b>2.19.7</b> tapply函數</a></li>
<li class="chapter" data-level="2.19.8" data-path="data-type.html"><a href="data-type.html#rapply"><i class="fa fa-check"></i><b>2.19.8</b> rapply函數</a></li>
<li class="chapter" data-level="2.19.9" data-path="data-type.html"><a href="data-type.html#eapply"><i class="fa fa-check"></i><b>2.19.9</b> eapply函數</a></li>
</ul></li>
<li class="chapter" data-level="2.20" data-path="data-type.html"><a href="data-type.html#section-2.20"><i class="fa fa-check"></i><b>2.20</b> 相關操作</a><ul>
<li class="chapter" data-level="2.20.1" data-path="data-type.html"><a href="data-type.html#section-2.20.1"><i class="fa fa-check"></i><b>2.20.1</b> 問題:想要知道有甚麼資料庫可以用?</a></li>
</ul></li>
<li class="chapter" data-level="2.21" data-path="data-type.html"><a href="data-type.html#section-2.21"><i class="fa fa-check"></i><b>2.21</b> 常見錯誤</a><ul>
<li class="chapter" data-level="2.21.1" data-path="data-type.html"><a href="data-type.html#error"><i class="fa fa-check"></i><b>2.21.1</b> error</a></li>
<li class="chapter" data-level="2.21.2" data-path="data-type.html"><a href="data-type.html#error-1"><i class="fa fa-check"></i><b>2.21.2</b> error</a></li>
<li class="chapter" data-level="2.21.3" data-path="data-type.html"><a href="data-type.html#error-2"><i class="fa fa-check"></i><b>2.21.3</b> error</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="regular-expression-syntax.html"><a href="regular-expression-syntax.html"><i class="fa fa-check"></i><b>3</b> Regular expression syntax</a><ul>
<li class="chapter" data-level="3.0.1" data-path="regular-expression-syntax.html"><a href="regular-expression-syntax.html#escape-sequences"><i class="fa fa-check"></i><b>3.0.1</b> Escape sequences</a></li>
<li class="chapter" data-level="3.0.2" data-path="regular-expression-syntax.html"><a href="regular-expression-syntax.html#section-3.0.2"><i class="fa fa-check"></i><b>3.0.2</b> 應用</a></li>
<li class="chapter" data-level="3.0.3" data-path="regular-expression-syntax.html"><a href="regular-expression-syntax.html#quantifiers"><i class="fa fa-check"></i><b>3.0.3</b> 數量修飾詞Quantifiers</a></li>
<li class="chapter" data-level="3.0.4" data-path="regular-expression-syntax.html"><a href="regular-expression-syntax.html#position-of-pattern-within-the-string"><i class="fa fa-check"></i><b>3.0.4</b> Position of pattern within the string</a></li>
<li class="chapter" data-level="3.0.5" data-path="regular-expression-syntax.html"><a href="regular-expression-syntax.html#operators"><i class="fa fa-check"></i><b>3.0.5</b> Operators</a></li>
<li class="chapter" data-level="3.0.6" data-path="regular-expression-syntax.html"><a href="regular-expression-syntax.html#character-classes"><i class="fa fa-check"></i><b>3.0.6</b> Character classes</a></li>
<li class="chapter" data-level="3.1" data-path="regular-expression-syntax.html"><a href="regular-expression-syntax.html#attribute"><i class="fa fa-check"></i><b>3.1</b> attribute</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="file-system.html"><a href="file-system.html"><i class="fa fa-check"></i><b>4</b> File System</a><ul>
<li class="chapter" data-level="4.1" data-path="file-system.html"><a href="file-system.html#exploring-file-system"><i class="fa fa-check"></i><b>4.1</b> Exploring file system</a></li>
<li class="chapter" data-level="4.2" data-path="file-system.html"><a href="file-system.html#creating-of-a-directory"><i class="fa fa-check"></i><b>4.2</b> Creating of a directory</a></li>
<li class="chapter" data-level="4.3" data-path="data-type.html"><a href="data-type.html#r"><i class="fa fa-check"></i><b>4.3</b> R系統檔案列表</a></li>
<li class="chapter" data-level="4.4" data-path="data-type.html"><a href="data-type.html#r"><i class="fa fa-check"></i><b>4.4</b> 在R中建立檔案名稱</a><ul>
<li class="chapter" data-level="4.4.1" data-path="file-system.html"><a href="file-system.html#note-about-windows"><i class="fa fa-check"></i><b>4.4.1</b> Note about Windows</a></li>
<li class="chapter" data-level="4.4.2" data-path="file-system.html"><a href="file-system.html#section-4.4.2"><i class="fa fa-check"></i><b>4.4.2</b> 和工作區相關的指令</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="file-system.html"><a href="file-system.html#section-4.5"><i class="fa fa-check"></i><b>4.5</b> 讀檔</a><ul>
<li class="chapter" data-level="4.5.1" data-path="file-system.html"><a href="file-system.html#section-4.5.1"><i class="fa fa-check"></i><b>4.5.1</b> 一般的開檔/關檔過程</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="file-system.html"><a href="file-system.html#write-csv"><i class="fa fa-check"></i><b>4.6</b> write csv</a><ul>
<li class="chapter" data-level="4.6.1" data-path="file-system.html"><a href="file-system.html#data.frame-to-csv"><i class="fa fa-check"></i><b>4.6.1</b> data.frame to CSV</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-type.html"><a href="data-type.html#r"><i class="fa fa-check"></i><b>4.7</b> R語言的檔案格式</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>5</b> Functions</a><ul>
<li class="chapter" data-level="5.1" data-path="functions.html"><a href="functions.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="functions.html"><a href="functions.html#function-fundamentals"><i class="fa fa-check"></i><b>5.2</b> Function fundamentals</a><ul>
<li class="chapter" data-level="5.2.1" data-path="functions.html"><a href="functions.html#first-class-functions"><i class="fa fa-check"></i><b>5.2.1</b> First-class functions</a></li>
<li class="chapter" data-level="5.2.2" data-path="functions.html"><a href="functions.html#function-components"><i class="fa fa-check"></i><b>5.2.2</b> Function components</a></li>
<li class="chapter" data-level="5.2.3" data-path="functions.html"><a href="functions.html#primitive-functions"><i class="fa fa-check"></i><b>5.2.3</b> Primitive functions</a></li>
<li class="chapter" data-level="5.2.4" data-path="functions.html"><a href="functions.html#exercises"><i class="fa fa-check"></i><b>5.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="functions.html"><a href="functions.html#lexical-scoping"><i class="fa fa-check"></i><b>5.3</b> Lexical scoping</a><ul>
<li class="chapter" data-level="5.3.1" data-path="functions.html"><a href="functions.html#name-masking"><i class="fa fa-check"></i><b>5.3.1</b> Name masking</a></li>
<li class="chapter" data-level="5.3.2" data-path="functions.html"><a href="functions.html#functions-vs.variables"><i class="fa fa-check"></i><b>5.3.2</b> Functions vs. variables</a></li>
<li class="chapter" data-level="5.3.3" data-path="functions.html"><a href="functions.html#fresh-start"><i class="fa fa-check"></i><b>5.3.3</b> A fresh start</a></li>
<li class="chapter" data-level="5.3.4" data-path="functions.html"><a href="functions.html#dynamic-lookup"><i class="fa fa-check"></i><b>5.3.4</b> Dynamic lookup</a></li>
<li class="chapter" data-level="5.3.5" data-path="functions.html"><a href="functions.html#exercises-1"><i class="fa fa-check"></i><b>5.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="functions.html"><a href="functions.html#lazy-evaluation"><i class="fa fa-check"></i><b>5.4</b> Lazy evaluation</a><ul>
<li class="chapter" data-level="5.4.1" data-path="functions.html"><a href="functions.html#forcing-evaluation"><i class="fa fa-check"></i><b>5.4.1</b> Forcing evaluation</a></li>
<li class="chapter" data-level="5.4.2" data-path="functions.html"><a href="functions.html#promises"><i class="fa fa-check"></i><b>5.4.2</b> Promises</a></li>
<li class="chapter" data-level="5.4.3" data-path="functions.html"><a href="functions.html#default-arguments"><i class="fa fa-check"></i><b>5.4.3</b> Default arguments</a></li>
<li class="chapter" data-level="5.4.4" data-path="functions.html"><a href="functions.html#missing-arguments"><i class="fa fa-check"></i><b>5.4.4</b> Missing arguments</a></li>
<li class="chapter" data-level="5.4.5" data-path="functions.html"><a href="functions.html#exercises-2"><i class="fa fa-check"></i><b>5.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="functions.html"><a href="functions.html#fun-dot-dot-dot"><i class="fa fa-check"></i><b>5.5</b> <code>...</code> (dot-dot-dot)</a><ul>
<li class="chapter" data-level="5.5.1" data-path="functions.html"><a href="functions.html#exercises-3"><i class="fa fa-check"></i><b>5.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="functions.html"><a href="functions.html#exiting-a-function"><i class="fa fa-check"></i><b>5.6</b> Exiting a function</a><ul>
<li class="chapter" data-level="5.6.1" data-path="functions.html"><a href="functions.html#implicit-vs.explict-returns"><i class="fa fa-check"></i><b>5.6.1</b> Implicit vs. explict returns</a></li>
<li class="chapter" data-level="5.6.2" data-path="functions.html"><a href="functions.html#invisible-values"><i class="fa fa-check"></i><b>5.6.2</b> Invisible values</a></li>
<li class="chapter" data-level="5.6.3" data-path="functions.html"><a href="functions.html#errors"><i class="fa fa-check"></i><b>5.6.3</b> Errors</a></li>
<li class="chapter" data-level="5.6.4" data-path="functions.html"><a href="functions.html#on-exit"><i class="fa fa-check"></i><b>5.6.4</b> Exit handlers</a></li>
<li class="chapter" data-level="5.6.5" data-path="functions.html"><a href="functions.html#exercises-4"><i class="fa fa-check"></i><b>5.6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="functions.html"><a href="functions.html#function-forms"><i class="fa fa-check"></i><b>5.7</b> Function forms</a><ul>
<li class="chapter" data-level="5.7.1" data-path="functions.html"><a href="functions.html#rewriting-to-prefix-form"><i class="fa fa-check"></i><b>5.7.1</b> Rewriting to prefix form</a></li>
<li class="chapter" data-level="5.7.2" data-path="functions.html"><a href="functions.html#prefix-form-prefix-form"><i class="fa fa-check"></i><b>5.7.2</b> Prefix form {prefix-form}</a></li>
<li class="chapter" data-level="5.7.3" data-path="functions.html"><a href="functions.html#infix-functions"><i class="fa fa-check"></i><b>5.7.3</b> Infix functions</a></li>
<li class="chapter" data-level="5.7.4" data-path="functions.html"><a href="functions.html#replacement-functions"><i class="fa fa-check"></i><b>5.7.4</b> Replacement functions</a></li>
<li class="chapter" data-level="5.7.5" data-path="functions.html"><a href="functions.html#special-forms"><i class="fa fa-check"></i><b>5.7.5</b> Special forms</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="functions.html"><a href="functions.html#invoking-a-function"><i class="fa fa-check"></i><b>5.8</b> Invoking a function</a><ul>
<li class="chapter" data-level="5.8.1" data-path="functions.html"><a href="functions.html#exercises-5"><i class="fa fa-check"></i><b>5.8.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="functions.html"><a href="functions.html#function-answers"><i class="fa fa-check"></i><b>5.9</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="section-6.html"><a href="section-6.html"><i class="fa fa-check"></i><b>6</b> 資料探索</a><ul>
<li class="chapter" data-level="6.1" data-path="section-6.html"><a href="section-6.html#section-6.1"><i class="fa fa-check"></i><b>6.1</b> 常用函數</a></li>
<li class="chapter" data-level="6.2" data-path="section-6.html"><a href="section-6.html#wooldridge-"><i class="fa fa-check"></i><b>6.2</b> 來自wooldridge 的資料集</a></li>
<li class="chapter" data-level="6.3" data-path="section-6.html"><a href="section-6.html#t-test"><i class="fa fa-check"></i><b>6.3</b> t-test</a><ul>
<li class="chapter" data-level="6.3.1" data-path="section-6.html"><a href="section-6.html#manually-enter-raw-data-from-wooldridge-table-c.3"><i class="fa fa-check"></i><b>6.3.1</b> Manually enter raw data from Wooldridge, Table C.3:</a></li>
<li class="chapter" data-level="6.3.2" data-path="section-6.html"><a href="section-6.html#calculate-change-the-parentheses-just-display-the-results"><i class="fa fa-check"></i><b>6.3.2</b> Calculate Change (the parentheses just display the results):</a></li>
<li class="chapter" data-level="6.3.3" data-path="section-6.html"><a href="section-6.html#ingredients-to-ci-formula"><i class="fa fa-check"></i><b>6.3.3</b> Ingredients to CI formula</a></li>
<li class="chapter" data-level="6.3.4" data-path="section-6.html"><a href="section-6.html#confidence-intervall"><i class="fa fa-check"></i><b>6.3.4</b> Confidence intervall:</a></li>
<li class="chapter" data-level="6.3.5" data-path="section-6.html"><a href="section-6.html#by-hand"><i class="fa fa-check"></i><b>6.3.5</b> by hand</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="section-6.html"><a href="section-6.html#by-t.test"><i class="fa fa-check"></i><b>6.4</b> by 函數<code>t.test()</code></a></li>
<li class="chapter" data-level="6.5" data-path="section-6.html"><a href="section-6.html#section-6.5"><i class="fa fa-check"></i><b>6.5</b> 分組</a><ul>
<li class="chapter" data-level="6.5.1" data-path="section-6.html"><a href="section-6.html#1--for"><i class="fa fa-check"></i><b>6.5.1</b> 方法1: 利用 for迴圈</a></li>
<li class="chapter" data-level="6.5.2" data-path="section-6.html"><a href="section-6.html#2aggregate"><i class="fa fa-check"></i><b>6.5.2</b> 方法2:　函數aggregate()</a></li>
<li class="chapter" data-level="6.5.3" data-path="section-6.html"><a href="section-6.html#3-tapply"><i class="fa fa-check"></i><b>6.5.3</b> 方法3: 函數　<code>tapply</code></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="section-6.html"><a href="section-6.html#plot"><i class="fa fa-check"></i><b>6.6</b> plot</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-packages.html"><a href="r-packages.html"><i class="fa fa-check"></i><b>7</b> R Packages</a><ul>
<li class="chapter" data-level="7.1" data-path="r-packages.html"><a href="r-packages.html#section-7.1"><i class="fa fa-check"></i><b>7.1</b> 基本</a><ul>
<li class="chapter" data-level="7.1.1" data-path="r-packages.html"><a href="r-packages.html#section-7.1.1"><i class="fa fa-check"></i><b>7.1.1</b> 套件在哪裡</a></li>
<li class="chapter" data-level="7.1.2" data-path="r-packages.html"><a href="r-packages.html#section-7.1.2"><i class="fa fa-check"></i><b>7.1.2</b> 搜尋套件中的檔案</a></li>
<li class="chapter" data-level="7.1.3" data-path="r-packages.html"><a href="r-packages.html#section-7.1.3"><i class="fa fa-check"></i><b>7.1.3</b> 哪個函數屬於哪個套件?</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="r-packages.html"><a href="r-packages.html#library-vs-require"><i class="fa fa-check"></i><b>7.2</b> <code>library()</code> vs <code>require()</code></a></li>
<li class="chapter" data-level="7.3" data-path="r-packages.html"><a href="r-packages.html#debug"><i class="fa fa-check"></i><b>7.3</b> 測試debug</a></li>
<li class="chapter" data-level="7.4" data-path="r-packages.html"><a href="r-packages.html#-package"><i class="fa fa-check"></i><b>7.4</b> 自製 package</a><ul>
<li class="chapter" data-level="7.4.1" data-path="r-packages.html"><a href="r-packages.html#-package-"><i class="fa fa-check"></i><b>7.4.1</b> 自製 package 範例</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="r-packages.html"><a href="r-packages.html#packing-up-your-data"><i class="fa fa-check"></i><b>7.5</b> Packing up your data</a></li>
<li class="chapter" data-level="7.6" data-path="r-packages.html"><a href="r-packages.html#what-is-a-package"><i class="fa fa-check"></i><b>7.6</b> What is a package?</a><ul>
<li class="chapter" data-level="7.6.1" data-path="r-packages.html"><a href="r-packages.html#section-7.6.1"><i class="fa fa-check"></i><b>7.6.1</b> 也可以包含資料</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="r-packages.html"><a href="r-packages.html#section-7.7"><i class="fa fa-check"></i><b>7.7</b> 怎樣自訂套件</a><ul>
<li class="chapter" data-level="7.7.1" data-path="r-packages.html"><a href="r-packages.html#devtools-package-skeleton"><i class="fa fa-check"></i><b>7.7.1</b> 利用<code>devtools</code> 建立骨架(package skeleton)</a></li>
<li class="chapter" data-level="7.7.2" data-path="r-packages.html"><a href="r-packages.html#section-7.7.2"><i class="fa fa-check"></i><b>7.7.2</b> 工作流程</a></li>
<li class="chapter" data-level="7.7.3" data-path="r-packages.html"><a href="r-packages.html#documentation-and-exports"><i class="fa fa-check"></i><b>7.7.3</b> Documentation and exports</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="r-packages.html"><a href="r-packages.html#section-7.8"><i class="fa fa-check"></i><b>7.8</b> 資料放入套件</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="section-8.html"><a href="section-8.html"><i class="fa fa-check"></i><b>8</b> 基本繪圖</a><ul>
<li class="chapter" data-level="8.1" data-path="section-8.html"><a href="section-8.html#reference"><i class="fa fa-check"></i><b>8.1</b> reference</a></li>
<li class="chapter" data-level="8.2" data-path="section-8.html"><a href="section-8.html#basic"><i class="fa fa-check"></i><b>8.2</b> basic</a><ul>
<li class="chapter" data-level="8.2.1" data-path="section-8.html"><a href="section-8.html#plot-1"><i class="fa fa-check"></i><b>8.2.1</b> plot</a></li>
<li class="chapter" data-level="8.2.2" data-path="section-8.html"><a href="section-8.html#section-8.2.2"><i class="fa fa-check"></i><b>8.2.2</b> 更多</a></li>
<li class="chapter" data-level="8.2.3" data-path="section-8.html"><a href="section-8.html#histograms"><i class="fa fa-check"></i><b>8.2.3</b> Histograms</a></li>
<li class="chapter" data-level="8.2.4" data-path="section-8.html"><a href="section-8.html#kernel-density-plot"><i class="fa fa-check"></i><b>8.2.4</b> Kernel Density Plot</a></li>
<li class="chapter" data-level="8.2.5" data-path="section-8.html"><a href="section-8.html#saving-graphs"><i class="fa fa-check"></i><b>8.2.5</b> Saving Graphs</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="section-8.html"><a href="section-8.html#section-8.3"><i class="fa fa-check"></i><b>8.3</b> 多個圖和疊圖</a><ul>
<li class="chapter" data-level="8.3.1" data-path="section-8.html"><a href="section-8.html#section-8.3.1"><i class="fa fa-check"></i><b>8.3.1</b> 多視窗</a></li>
<li class="chapter" data-level="8.3.2" data-path="section-8.html"><a href="section-8.html#-plots"><i class="fa fa-check"></i><b>8.3.2</b> 合併 Plots</a></li>
<li class="chapter" data-level="8.3.3" data-path="section-8.html"><a href="section-8.html#section-8.3.3"><i class="fa fa-check"></i><b>8.3.3</b> 疊圖</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="section-8.html"><a href="section-8.html#section-8.4"><i class="fa fa-check"></i><b>8.4</b> 分組畫圖</a><ul>
<li class="chapter" data-level="8.4.1" data-path="section-8.html"><a href="section-8.html#comparing-groups-via-kernal-density"><i class="fa fa-check"></i><b>8.4.1</b> Comparing Groups VIA Kernal Density</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="section-8.html"><a href="section-8.html#add-texts-within-the-graph"><i class="fa fa-check"></i><b>8.5</b> Add texts within the graph</a><ul>
<li class="chapter" data-level="8.5.1" data-path="section-8.html"><a href="section-8.html#add-text-in-the-margins-of-the-graph"><i class="fa fa-check"></i><b>8.5.1</b> Add text in the margins of the graph</a></li>
<li class="chapter" data-level="8.5.2" data-path="section-8.html"><a href="section-8.html#add-mathematical-annotation-to-a-plot"><i class="fa fa-check"></i><b>8.5.2</b> Add mathematical annotation to a plot</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="section-8.html"><a href="section-8.html#section-8.6"><i class="fa fa-check"></i><b>8.6</b> 函數畫圖</a></li>
<li class="chapter" data-level="8.7" data-path="section-8.html"><a href="section-8.html#plot-example"><i class="fa fa-check"></i><b>8.7</b> plot example</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="sample-and-distribution-01.html"><a href="sample-and-distribution-01.html"><i class="fa fa-check"></i><b>9</b> Sample and Distribution 01</a><ul>
<li class="chapter" data-level="9.1" data-path="sample-and-distribution-01.html"><a href="sample-and-distribution-01.html#section-9.1"><i class="fa fa-check"></i><b>9.1</b> 排列組合與概率的計算</a></li>
<li class="chapter" data-level="9.2" data-path="sample-and-distribution-01.html"><a href="sample-and-distribution-01.html#distribution"><i class="fa fa-check"></i><b>9.2</b> distribution</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="programming-in-r.html"><a href="programming-in-r.html"><i class="fa fa-check"></i><b>10</b> programming in R</a><ul>
<li class="chapter" data-level="10.1" data-path="programming-in-r.html"><a href="programming-in-r.html#section-10.1"><i class="fa fa-check"></i><b>10.1</b> 條件指令</a><ul>
<li class="chapter" data-level="10.1.1" data-path="programming-in-r.html"><a href="programming-in-r.html#if"><i class="fa fa-check"></i><b>10.1.1</b> if</a></li>
<li class="chapter" data-level="10.1.2" data-path="programming-in-r.html"><a href="programming-in-r.html#ifelse"><i class="fa fa-check"></i><b>10.1.2</b> ifelse的寫法</a></li>
<li class="chapter" data-level="10.1.3" data-path="programming-in-r.html"><a href="programming-in-r.html#switch"><i class="fa fa-check"></i><b>10.1.3</b> switch的寫法</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="programming-in-r.html"><a href="programming-in-r.html#section-10.2"><i class="fa fa-check"></i><b>10.2</b> 迴圈指令</a><ul>
<li class="chapter" data-level="10.2.1" data-path="programming-in-r.html"><a href="programming-in-r.html#for-loop"><i class="fa fa-check"></i><b>10.2.1</b> for-loop</a></li>
<li class="chapter" data-level="10.2.2" data-path="programming-in-r.html"><a href="programming-in-r.html#while-loop"><i class="fa fa-check"></i><b>10.2.2</b> while-loop</a></li>
<li class="chapter" data-level="10.2.3" data-path="programming-in-r.html"><a href="programming-in-r.html#repeat-loop"><i class="fa fa-check"></i><b>10.2.3</b> repeat-loop</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="programming-in-r.html"><a href="programming-in-r.html#section-10.3"><i class="fa fa-check"></i><b>10.3</b> 範例</a><ul>
<li class="chapter" data-level="10.3.1" data-path="programming-in-r.html"><a href="programming-in-r.html#-detach_package"><i class="fa fa-check"></i><b>10.3.1</b> 範例 detach_package()</a></li>
<li class="chapter" data-level="10.3.2" data-path="programming-in-r.html"><a href="programming-in-r.html#2.libpaths"><i class="fa fa-check"></i><b>10.3.2</b> 範例2：.libPaths()</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="programming-in-r.html"><a href="programming-in-r.html#r-meta-"><i class="fa fa-check"></i><b>10.4</b> R語言的 meta 計算。</a><ul>
<li class="chapter" data-level="10.4.1" data-path="programming-in-r.html"><a href="programming-in-r.html#deparse"><i class="fa fa-check"></i><b>10.4.1</b> <strong>deparse</strong></a></li>
<li class="chapter" data-level="10.4.2" data-path="programming-in-r.html"><a href="programming-in-r.html#quote"><i class="fa fa-check"></i><b>10.4.2</b> <strong>quote</strong></a></li>
<li class="chapter" data-level="10.4.3" data-path="programming-in-r.html"><a href="programming-in-r.html#eval"><i class="fa fa-check"></i><b>10.4.3</b> <strong>eval</strong></a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="programming-in-r.html"><a href="programming-in-r.html#section-10.5"><i class="fa fa-check"></i><b>10.5</b> 討論</a><ul>
<li class="chapter" data-level="10.5.1" data-path="programming-in-r.html"><a href="programming-in-r.html#section-10.5.1"><i class="fa fa-check"></i><b>10.5.1</b> 測試紀錄</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="programming-in-r.html"><a href="programming-in-r.html#section-10.6"><i class="fa fa-check"></i><b>10.6</b> 練習</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="econometrics.html"><a href="econometrics.html"><i class="fa fa-check"></i><b>11</b> Econometrics</a><ul>
<li class="chapter" data-level="11.1" data-path="econometrics.html"><a href="econometrics.html#package-recommended"><i class="fa fa-check"></i><b>11.1</b> package recommended</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="simulate-1.html"><a href="simulate-1.html"><i class="fa fa-check"></i><b>12</b> simulate 1</a><ul>
<li class="chapter" data-level="12.0.1" data-path="simulate-1.html"><a href="simulate-1.html#sm"><i class="fa fa-check"></i><b>12.0.1</b> 利用套件<code>sm</code></a></li>
<li class="chapter" data-level="12.0.2" data-path="simulate-1.html"><a href="simulate-1.html#sm-"><i class="fa fa-check"></i><b>12.0.2</b> sm 範例</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="rbook-.html"><a href="rbook-.html"><i class="fa fa-check"></i><b>13</b> rbook 提要</a><ul>
<li class="chapter" data-level="13.1" data-path="rbook-.html"><a href="rbook-.html#index.rmd"><i class="fa fa-check"></i><b>13.1</b> index.Rmd</a></li>
<li class="chapter" data-level="13.2" data-path="rbook-.html"><a href="rbook-.html#section"><i class="fa fa-check"></i><b>13.2</b> </a></li>
<li class="chapter" data-level="13.3" data-path="rbook-.html"><a href="rbook-.html#_output.yml-"><i class="fa fa-check"></i><b>13.3</b> 其他_output.yml 範例</a></li>
<li class="chapter" data-level="13.4" data-path="rbook-.html"><a href="rbook-.html#travis.yml"><i class="fa fa-check"></i><b>13.4</b> .travis.yml</a></li>
<li class="chapter" data-level="13.5" data-path="rbook-.html"><a href="rbook-.html#section-13.5"><i class="fa fa-check"></i><b>13.5</b> 紀錄</a><ul>
<li class="chapter" data-level="13.5.1" data-path="rbook-.html"><a href="rbook-.html#knitr-hook"><i class="fa fa-check"></i><b>13.5.1</b> knitr hook</a></li>
<li class="chapter" data-level="13.5.2" data-path="rbook-.html"><a href="rbook-.html#terminal-output"><i class="fa fa-check"></i><b>13.5.2</b> terminal output</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="rbook-.html"><a href="rbook-.html#python"><i class="fa fa-check"></i><b>13.6</b> python</a></li>
<li class="chapter" data-level="13.7" data-path="rbook-.html"><a href="rbook-.html#-1"><i class="fa fa-check"></i><b>13.7</b> 討論</a><ul>
<li class="chapter" data-level="13.7.1" data-path="rbook-.html"><a href="rbook-.html#inline-code"><i class="fa fa-check"></i><b>13.7.1</b> inline code</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">test for class</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-type" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> data type</h1>
<div id="section-2.1" class="section level2">
<h2><span class="header-section-number">2.1</span> 基本操作</h2>
<div id="section-2.1.1" class="section level3">
<h3><span class="header-section-number">2.1.1</span> 指派</h3>
<p>雖然也可以用=但是，R的設計是使用&lt;-。</p>
<pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">3</span></code></pre>
<p><code>a&lt;-3</code>是一個指派的敘述句,不會回饋資訊到螢幕上。如果要知道a的內容是甚麼,就打入<code>a</code> 或者<code>(a&lt;-3)</code></p>
<pre class="sourceCode r"><code class="sourceCode r">    a</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 3
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">(a&lt;-<span class="dv">3</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 3
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">b &lt;-<span class="st"> </span><span class="kw">sqrt</span>(a <span class="op">*</span><span class="st"> </span>a <span class="op">+</span><span class="st"> </span><span class="dv">5</span>)
b</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 3.74
</code></pre>
<p>在session中的如果要列出已經定義過的變數,可以利用ls</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ls</span>()</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "a" "b"
</code></pre>
</div>
</div>
<div id="section-2.2" class="section level2">
<h2><span class="header-section-number">2.2</span> 運算</h2>
<div id="section-2.2.1" class="section level3">
<h3><span class="header-section-number">2.2.1</span> 四則運算</h3>
</div>
<div id="logical" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Logical</h3>
<p>Another important data type is the logical type. There are two predefined variables, TRUE and FALSE:</p>
<pre class="sourceCode r"><code class="sourceCode r">a =<span class="st"> </span><span class="ot">TRUE</span>
<span class="kw">typeof</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "logical"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">b =<span class="st"> </span><span class="ot">FALSE</span>
<span class="kw">typeof</span>(b)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "logical"
</code></pre>
</div>
<div id="r" class="section level3">
<h3><span class="header-section-number">2.2.3</span> R語言常用邏輯運算子</h3>
<table>
<thead>
<tr class="header">
<th>operator</th>
<th>說明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;</td>
<td>less than</td>
</tr>
<tr class="even">
<td>&gt;</td>
<td>great than</td>
</tr>
<tr class="odd">
<td>&lt;=</td>
<td>less than or equal</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>greater than or equal</td>
</tr>
<tr class="odd">
<td>==</td>
<td>equal to</td>
</tr>
<tr class="even">
<td>!=</td>
<td>not equal to</td>
</tr>
<tr class="odd">
<td>|</td>
<td>entry wise or</td>
</tr>
<tr class="even">
<td>||</td>
<td>or</td>
</tr>
<tr class="odd">
<td>!</td>
<td>not</td>
</tr>
<tr class="even">
<td>&amp;</td>
<td>entry wise and</td>
</tr>
<tr class="odd">
<td>&amp;&amp;</td>
<td>and</td>
</tr>
<tr class="even">
<td>xor(a,b)</td>
<td>exclusive or</td>
</tr>
</tbody>
</table>
<p>範例：不同的運算子，在個別元素和整個向量的運算結果不一樣：</p>
<pre class="sourceCode r"><code class="sourceCode r">a =<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)
b =<span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">FALSE</span>)
a <span class="op">|</span><span class="st"> </span>b</code></pre>
<pre style="border: 1px grey dotted;"><code>[1]  TRUE FALSE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">a <span class="op">||</span><span class="st"> </span>b</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xor</span>(a, b)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1]  TRUE FALSE
</code></pre>
</div>
<div id="section-2.2.4" class="section level3">
<h3><span class="header-section-number">2.2.4</span> 邏輯函數</h3>
<p><code>is.</code>family 函數，可以用來判定變數是什麼型態，傳回真假值，例如</p>
<pre class="sourceCode r"><code class="sourceCode r">a =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)
<span class="kw">is.numeric</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.factor</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<p>函數<code>identical(a,b)</code>
a,b 是否相等</p>
<pre class="sourceCode r"><code class="sourceCode r">A &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>)
B &lt;-<span class="st"> </span>A
C &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;E&quot;</span>)

<span class="kw">identical</span>(A,C)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<p>函數<code>which()</code>哪些元素不一致</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which</span>(A <span class="op">!=</span><span class="st"> </span>C)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 2 4
</code></pre>
<p>函數<code>all()</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all</span>(A<span class="op">==</span>B)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all</span>(A<span class="op">==</span>C)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<div class="sidebar">
<p><code>which()</code>,<code>all()</code>裡面的參數其實都是邏輯向量。</p>
</div>
<p>註解：但是R語言的向量運算，涉及自動填充循環，因此注意下面的計算結果</p>
<pre class="sourceCode r"><code class="sourceCode r">D &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>)
E &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>)
<span class="kw">all</span>(D<span class="op">==</span>E)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all</span>(<span class="kw">length</span>(D)<span class="op">==</span><span class="kw">length</span>(E)) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">all</span>(D<span class="op">==</span>E)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<p>練習：<br />
將上面可能造成誤判的情況，寫成函數先判斷是否長度相等，然後判斷元素相等，可以和<code>identical()</code>比較。</p>
</div>
<div id="section-2.2.5" class="section level3">
<h3><span class="header-section-number">2.2.5</span> 資源</h3>
<ul>
<li><a href="http://adv-r.had.co.nz/Data-structures.html">資料結構</a></li>
</ul>
</div>
</div>
<div id="section-2.3" class="section level2">
<h2><span class="header-section-number">2.3</span> 介紹</h2>
<p>在R語言中,型態不須經過宣告(declared)。 一個變數的型態經由assignment的過程決定,即&lt;-右邊的R-Objects。也就是在指派變數值的時候,同時決定了型態。基本的 R-object有 −</p>
<ul>
<li>Vectors<br />
</li>
<li>Lists<br />
</li>
<li>Matrices</li>
<li>Arrays</li>
<li>Factors</li>
<li>Data Frames</li>
</ul>
<p>最簡單的是vector物件,atomic vector 有6種data types(有時也叫做 6 個classes)</p>
<table>
<thead>
<tr class="header">
<th>Data Type</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Logical</td>
<td>TRUE, FALSE</td>
</tr>
<tr class="even">
<td>Numeric</td>
<td>1.3, 5, 99</td>
</tr>
<tr class="odd">
<td>Integer</td>
<td>3L, 24L, 0L</td>
</tr>
<tr class="even">
<td>Complex</td>
<td>5 + 4i</td>
</tr>
<tr class="odd">
<td>Character</td>
<td>‘b’ , “good”, “TRUE”, ‘23.4’</td>
</tr>
<tr class="even">
<td>Raw</td>
<td>“Hello” is stored as 48 65 6c 6c 6f</td>
</tr>
</tbody>
</table>
<pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="ot">TRUE</span> 
<span class="kw">print</span>(<span class="kw">class</span>(v))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "logical"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="fl">23.5</span>
<span class="kw">print</span>(<span class="kw">class</span>(v))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "numeric"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span>2L
<span class="kw">print</span>(<span class="kw">class</span>(v))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "integer"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">+</span>5i
<span class="kw">print</span>(<span class="kw">class</span>(v))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "complex"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> &quot;TRUE&quot;</span>
<span class="kw">print</span>(<span class="kw">class</span>(v))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">charToRaw</span>(<span class="st">&quot;Hello&quot;</span>)
<span class="kw">print</span>(<span class="kw">class</span>(v))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "raw"
</code></pre>
</div>
<div id="section-2.4" class="section level2">
<h2><span class="header-section-number">2.4</span> 實數的比較</h2>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">by =</span> <span class="fl">0.2</span>)
y &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dt">by =</span> <span class="fl">0.2</span>)
y[<span class="dv">4</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 0.6
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">3</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 0.4
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>x[<span class="dv">3</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 0.6
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">y[<span class="dv">4</span>] <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>x[<span class="dv">3</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">y[<span class="dv">4</span>] <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>x[<span class="dv">3</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## note:</span>
<span class="kw">all.equal</span>(y[<span class="dv">4</span>], <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>x[<span class="dv">3</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">## Q: what is the result of : 1-0.4 ==0.6</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="fl">0.1+0.2</span> <span class="op">==</span><span class="st"> </span><span class="fl">0.3</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(<span class="fl">0.1+0.2</span>,<span class="fl">0.3</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
</div>
<div id="section-2.5" class="section level2">
<h2><span class="header-section-number">2.5</span> 字串</h2>
<p><a href="https://www.gastonsanchez.com/r4strings/chars.html">參考</a></p>
<div id="section-2.5.1" class="section level3">
<h3><span class="header-section-number">2.5.1</span> 建立字串</h3>
<p>可以是 雙引號中&quot;&quot; 或 單引號中’’。
字串中如果有雙引號,或單引號，則如下表示:<br />
“‘這個’來自’那個’”</p>
<pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> &quot;hello&quot;</span>
a</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "hello"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<p>利用函數:character() 這個函數的參數,為整數,建立一個list,裡面的元素都是空字串</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 變數ex初始化為character vector,參看後面的討論</span>
(ex &lt;-<span class="st"> </span><span class="kw">character</span>(<span class="dv">0</span>))</code></pre>
<pre style="border: 1px grey dotted;"><code>character(0)
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(ex)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 0
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(ex)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 如果剛剛沒有設定ex &lt;- character(0),這裡會發生錯誤</span>
(ex[<span class="dv">1</span>] &lt;-<span class="st"> &quot;first&quot;</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "first"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># check its length again</span>
<span class="kw">length</span>(ex)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1
</code></pre>
<p>索引可以用跳的:</p>
<pre class="sourceCode r"><code class="sourceCode r">(ex[<span class="dv">4</span>] &lt;-<span class="st"> &quot;fourth&quot;</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "fourth"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(ex)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 4
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(ex)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">ex</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "first"  NA       NA       "fourth"
</code></pre>
<p>跳過的索引,內容自動為<code>NA</code>.</p>
</div>
<div id="section-2.5.2" class="section level3">
<h3><span class="header-section-number">2.5.2</span> 空字串</h3>
<p>引號內連空白都沒有的字串:
(比較上面利用character(5)可以建立5個元素為空字串的vector。)</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># empty string</span>
empty_str &lt;-<span class="st"> &quot;&quot;</span>
empty_str</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] ""
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># class</span>
<span class="kw">class</span>(empty_str)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<div id="character0" class="section level4">
<h4><span class="header-section-number">2.5.2.1</span> 討論character(0)</h4>
<p>前面說character(2),可以傳回長度2,每個元素都是空白字串&quot;&quot;的向量,那麼character(0)是甚麼?
除了前面提到的變數初始化為向量(也許可以說是向量宣告)
例如,整數也是這樣</p>
<pre class="sourceCode r"><code class="sourceCode r">zz&lt;-<span class="kw">integer</span>(<span class="dv">0</span>)
zz[<span class="dv">4</span>]=<span class="dv">6</span>
zz</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] NA NA NA  6
</code></pre>
<p>這裡對character(0)做一些測試:</p>
<pre class="sourceCode r"><code class="sourceCode r">ex1&lt;-<span class="kw">character</span>(<span class="dv">0</span>) 
ex2&lt;-<span class="st">&quot;&quot;</span>

<span class="kw">typeof</span>(ex1)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(ex2)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(ex1)</code></pre>
<pre style="border: 1px grey dotted;"><code> chr(0) 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(ex2)</code></pre>
<pre style="border: 1px grey dotted;"><code> chr ""
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(ex1)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(ex2)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.list</span>(ex1)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.list</span>(ex2)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<p>surprise: 一個字元也是向量。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.vector</span>(ex1)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.vector</span>(ex2)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(ex1)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 0
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(ex2)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1
</code></pre>
<p>最後,這兩個是不是相等</p>
<pre class="sourceCode r"><code class="sourceCode r">ex1<span class="op">==</span>ex2</code></pre>
<pre style="border: 1px grey dotted;"><code>logical(0)
</code></pre>
</div>
</div>
</div>
<div id="is-family" class="section level2">
<h2><span class="header-section-number">2.6</span> 型態操作is family</h2>
<p>is.numeric(), is.integer(), and is.double()
## 型態轉換 as family</p>
<pre class="sourceCode r"><code class="sourceCode r">a&lt;-<span class="kw">c</span>(<span class="ot">TRUE</span>,<span class="ot">FALSE</span>)
<span class="kw">as.numeric</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1 0
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">an&lt;-<span class="kw">as.logical</span>(a)
an</code></pre>
<pre style="border: 1px grey dotted;"><code>[1]  TRUE FALSE
</code></pre>
</div>
<div id="vector" class="section level2">
<h2><span class="header-section-number">2.7</span> vector</h2>
<p>利用<code>c</code>函數，可以使用vector存放一個以上的數字。</p>
<pre class="sourceCode r"><code class="sourceCode r">a =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)
a1 =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></code></pre>
<p>有關list的運算:加減乘除等等</p>
<pre class="sourceCode r"><code class="sourceCode r">a =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)
a<span class="op">+</span><span class="dv">1</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 2 3 4 5 6
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 3
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 2.5
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      1       2       3       3       4       5 
</code></pre>
<p>list的元素,利用中括號</p>
<pre class="sourceCode r"><code class="sourceCode r">a =<span class="st"> </span><span class="dv">2</span><span class="op">:</span><span class="dv">6</span>
a[<span class="dv">1</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 2
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">a[<span class="dv">2</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 3
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">a[<span class="dv">0</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>integer(0)
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">a[<span class="dv">6</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] NA
</code></pre>
<p>在R中,的最小的索引值為1base.如果給索引為0,可以知道資料是否被排序。 超出索引範圍得到&quot;NA。</p>
<pre class="sourceCode r"><code class="sourceCode r">a=<span class="dv">2</span><span class="op">:</span><span class="dv">6</span>
x =<span class="st"> </span>a[<span class="dv">6</span>]</code></pre>
<div class="sidebar">
<p>如何判斷是否NA</p>
<pre class="sourceCode r"><code class="sourceCode r">x <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] NA
</code></pre>
<p>上面的比較沒有意義,和NA的任何運算都是NA</p>
<pre class="sourceCode r"><code class="sourceCode r">r =<span class="st"> </span>x <span class="op">==</span><span class="st"> </span><span class="ot">NA</span>
r</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] NA
</code></pre>
<p>結論:任何變數和NA運算,結果還是NA<br />
另一種方法</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(x <span class="op">==</span><span class="st"> </span><span class="ot">NA</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] NA
</code></pre>
<p>如何判斷NA ? <code>is.na()</code></p>
<pre class="sourceCode r"><code class="sourceCode r">    <span class="kw">is.na</span>(a[<span class="dv">6</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
</div>
<p>初始化向量,可以利用a&lt;-10 或指定numeric(double)型態</p>
<pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">numeric</span>(<span class="dv">10</span>) 
a</code></pre>
<pre style="border: 1px grey dotted;"><code> [1] 0 0 0 0 0 0 0 0 0 0
</code></pre>
<p>如果想要知到變數的資料型別,利用函數typeof()</p>
<p>typeof()函數回傳的結果是“字串”</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(a) <span class="co"># 結果是&quot;double&quot;</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "double"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">s =<span class="st"> </span><span class="kw">typeof</span>(a)
s</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "double"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(s) <span class="co">#結果是 &quot;character&quot;</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<div id="section-2.7.1" class="section level3">
<h3><span class="header-section-number">2.7.1</span> 練習範例</h3>
<p>Q1. a,a1,a2 屬於甚麼型態</p>
<pre class="sourceCode r"><code class="sourceCode r">a =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>
a1 =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)
a2 =<span class="st"> </span><span class="kw">numeric</span>(<span class="dv">4</span>)</code></pre>
<p>A1</p>
<p>Q2:a3的長度是甚麼?2,或6</p>
<pre class="sourceCode r"><code class="sourceCode r">a1&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
a2&lt;-<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)
a3&lt;-<span class="kw">c</span>(a1,a2)</code></pre>
<p>HINT:
a1
a2
a3;length(a3)</p>
<div class="sidebar">
<h2 id="vector"><span class="header-section-number">2.7.1</span> 字串和vector</h2>
<p>在EXCEL中，vector 一般指的是只放元素為數字的陣列(array);而陣列是可以存數字和文字的區域。table是有欄位的陣列。
但是在R語言中,vector 只是元素型態相同即可。</p>
</div>
<pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> &quot;hello&quot;</span>
a</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "hello"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;there&quot;</span>)
b</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "hello" "there"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">b[<span class="dv">1</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "hello"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(b)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "character"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">(<span class="dt">a =</span> <span class="kw">character</span>(<span class="dv">5</span>)) <span class="co"># 產生5個空白字串</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "" "" "" "" ""
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">(<span class="dt">b =</span> letters[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]) <span class="co"># 注意,letters不是函數</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "a" "b" "c" "d"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">letters</code></pre>
<pre style="border: 1px grey dotted;"><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q"
[18] "r" "s" "t" "u" "v" "w" "x" "y" "z"
</code></pre>
<p>因為c函數的運算結果為vector,因此下例中,其元素都是字串</p>
<pre class="sourceCode r"><code class="sourceCode r"> (a&lt;-<span class="kw">c</span>(<span class="st">&quot;d&quot;</span>,<span class="dv">4</span>,<span class="ot">TRUE</span>))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "d"    "4"    "TRUE"
</code></pre>
<p>問題:
怎樣知道r是空集合?</p>
<pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span>letters[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] 
z &lt;-<span class="st"> </span>letters[<span class="dv">4</span><span class="op">:</span><span class="dv">6</span>] 
r&lt;-<span class="kw">intersect</span>(y,z) 
r</code></pre>
<pre style="border: 1px grey dotted;"><code>character(0)
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.na</span>(r)</code></pre>
<pre style="border: 1px grey dotted;"><code>logical(0)
</code></pre>
<p>另外,當vector有多個字串,而使用索引0的時候,也會出現 <code>character(0)</code>,例如:</p>
<pre class="sourceCode r"><code class="sourceCode r">string &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;sun&#39;</span>, <span class="st">&#39;sky&#39;</span>, <span class="st">&#39;clouds&#39;</span>)
string[<span class="dv">0</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>character(0)
</code></pre>
</div>
<div id="vector-" class="section level3">
<h3><span class="header-section-number">2.7.2</span> vector 相關的運算</h3>
<p>連續數字可以利用操作元<code>:</code>,例如:</p>
<p>x &lt;- 1:7; x
y &lt;- 2:-2; y</p>
<p>比較複雜的序列可以利用函數 seq() ,例如</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dt">by=</span><span class="fl">0.2</span>)          <span class="co"># specify step size</span></code></pre>
<pre style="border: 1px grey dotted;"><code> [1] 1.0 1.2 1.4 1.6 1.8 2.0 2.2 2.4 2.6 2.8 3.0
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"> <span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dt">length.out=</span><span class="dv">4</span>)    <span class="co"># specify length of the vector</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1.00 2.33 3.67 5.00
</code></pre>
</div>
<div id="vector" class="section level3">
<h3><span class="header-section-number">2.7.3</span> 如何存取vector中的元素</h3>
<p>元素索引可以利用 logical, integer or character vector.</p>
<p>如果利用整數索引,則從1開始.但是,如果索引值給的是負數(例如-2),則除了2號元素以外,都會被傳回。但是不能同時有正負。同時,浮點數會被truncated。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>x
[<span class="dv">1</span>]  <span class="dv">0</span>  <span class="dv">2</span>  <span class="dv">4</span>  <span class="dv">6</span>  <span class="dv">8</span> <span class="dv">10</span>
<span class="op">&gt;</span><span class="st"> </span>x[<span class="dv">3</span>]           <span class="co"># access 3rd element</span>
[<span class="dv">1</span>] <span class="dv">4</span>
<span class="op">&gt;</span><span class="st"> </span>x[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]     <span class="co"># access 2nd and 4th element</span>
[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">6</span>
<span class="op">&gt;</span><span class="st"> </span>x[<span class="op">-</span><span class="dv">1</span>]          <span class="co"># access all but 1st element</span>
[<span class="dv">1</span>]  <span class="dv">2</span>  <span class="dv">4</span>  <span class="dv">6</span>  <span class="dv">8</span> <span class="dv">10</span>
<span class="op">&gt;</span><span class="st"> </span>x[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">-4</span>)]    <span class="co"># 不能混合正負</span>
Error <span class="cf">in</span> x[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">-4</span>)] <span class="op">:</span><span class="st"> </span>only <span class="dv">0</span><span class="st">&#39;s may be mixed with negative subscripts</span>
<span class="st">&gt; x[c(2.4, 3.54)]    # real numbers are truncated to integers</span>
<span class="st">[1] 2 4</span></code></pre>
</div>
<div id="section-2.7.4" class="section level3">
<h3><span class="header-section-number">2.7.4</span> 邏輯做為索引</h3>
<p>說是索引有點誤導,可以認為是元素篩選。例如</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>x[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)]
[<span class="dv">1</span>] <span class="dv">-3</span>  <span class="dv">3</span>
<span class="op">&gt;</span><span class="st"> </span>x[x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>]  <span class="co"># filtering vectors based on conditions</span>
[<span class="dv">1</span>] <span class="dv">-3</span> <span class="dv">-1</span>
<span class="op">&gt;</span><span class="st"> </span>x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>]
[<span class="dv">1</span>] <span class="dv">3</span></code></pre>
<p>In the above example, the expression x&gt;0 will yield a logical vector (FALSE, FALSE, FALSE, TRUE) which is then used for indexing.</p>
</div>
<div id="-character-vector-" class="section level3">
<h3><span class="header-section-number">2.7.5</span> 利用字串( character vector) 作為索引</h3>
<p>每個元素可以有名稱:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;first&quot;</span>=<span class="dv">3</span>, <span class="st">&quot;second&quot;</span>=<span class="dv">0</span>, <span class="st">&quot;third&quot;</span>=<span class="dv">9</span>)
<span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(x)
[<span class="dv">1</span>] <span class="st">&quot;first&quot;</span>  <span class="st">&quot;second&quot;</span> <span class="st">&quot;third&quot;</span> 
<span class="op">&gt;</span><span class="st"> </span>x[<span class="st">&quot;second&quot;</span>]
second 
<span class="dv">0</span> 
<span class="op">&gt;</span><span class="st"> </span>x[<span class="kw">c</span>(<span class="st">&quot;first&quot;</span>, <span class="st">&quot;third&quot;</span>)]
first third 
<span class="dv">3</span>     <span class="dv">9</span></code></pre>
<pre class="sourceCode r"><code class="sourceCode r">a&lt;-<span class="kw">c</span>(<span class="dt">x=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,<span class="dt">y=</span><span class="dv">3</span><span class="op">:</span><span class="dv">4</span>)
a[<span class="st">&quot;x1&quot;</span>] <span class="co"># 不是a[x1]</span></code></pre>
<pre style="border: 1px grey dotted;"><code>x1 
 1 
</code></pre>
<p><a href="rbook-.html#section"></a> 和[<a href="rbook-.html#section"></a>]的差別:<br />
原來是甚麼(例如,list 或vector),<a href="rbook-.html#section"></a>只是返回子集合(仍然是list或vector),但是[<a href="rbook-.html#section"></a>]則是返回內容.</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">2</span>, <span class="dt">c =</span> <span class="dv">3</span>)
x[<span class="st">&quot;a&quot;</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>a 
1 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">x[[<span class="st">&quot;a&quot;</span>]]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">x[<span class="dv">1</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>a 
1 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">x[[<span class="dv">1</span>]]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1
</code></pre>
<p>和list的區別是
1. $
1. 不必有&quot;&quot;</p>
<pre class="sourceCode r"><code class="sourceCode r">a1&lt;-<span class="kw">list</span>(<span class="dt">x=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,<span class="dt">y=</span><span class="dv">3</span><span class="op">:</span><span class="dv">4</span>)
a1<span class="op">$</span>x</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1 2
</code></pre>
</div>
<div id="how-to-modify-a-vector-in-r" class="section level3">
<h3><span class="header-section-number">2.7.6</span> How to modify a vector in R?</h3>
<p>We can modify a vector using the assignment operator.</p>
<p>We can use the techniques discussed above to access specific elements and modify them.</p>
<p>If we want to truncate the elements, we can use reassignments.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>x
[<span class="dv">1</span>] <span class="dv">-3</span> <span class="dv">-2</span> <span class="dv">-1</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">2</span>
<span class="op">&gt;</span><span class="st"> </span>x[<span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">0</span>; x        <span class="co"># modify 2nd element</span>
[<span class="dv">1</span>] <span class="dv">-3</span>  <span class="dv">0</span> <span class="dv">-1</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">2</span>
<span class="op">&gt;</span><span class="st"> </span>x[x<span class="op">&lt;</span><span class="dv">0</span>] &lt;-<span class="st"> </span><span class="dv">5</span>; x   <span class="co"># modify elements less than 0</span>
[<span class="dv">1</span>] <span class="dv">5</span> <span class="dv">0</span> <span class="dv">5</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span>
<span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span>x[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]; x      <span class="co"># truncate x to first 4 elements</span>
[<span class="dv">1</span>] <span class="dv">5</span> <span class="dv">0</span> <span class="dv">5</span> <span class="dv">0</span></code></pre>
</div>
<div id="how-to-delete-a-vector" class="section level3">
<h3><span class="header-section-number">2.7.7</span> How to delete a Vector?</h3>
<p>We can delete a vector by simply assigning a NULL to it.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span>x
[<span class="dv">1</span>] <span class="dv">-3</span> <span class="dv">-2</span> <span class="dv">-1</span>  <span class="dv">0</span>  <span class="dv">1</span>  <span class="dv">2</span>
<span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="ot">NULL</span>
<span class="op">&gt;</span><span class="st"> </span>x
<span class="ot">NULL</span>
<span class="op">&gt;</span><span class="st"> </span>x[<span class="dv">4</span>]
<span class="ot">NULL</span></code></pre>

</div>
</div>
<div id="list" class="section level2">
<h2><span class="header-section-number">2.8</span> List</h2>
<p>Lists 是一個R物件。其元素內容可以是不同型態,例如 numbers, strings, vectors,matrix 或者是另一個 list，甚至是函數。。</p>
<div id="-list" class="section level3">
<h3><span class="header-section-number">2.8.1</span> 建立 List</h3>
<p>函數<code>list()</code> 可以建立list.</p>
<p>包含多種type的List: strings, numbers, vectors and a logical values.</p>
<pre class="sourceCode r"><code class="sourceCode r">list_data &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;Red&quot;</span>, <span class="st">&quot;Green&quot;</span>, <span class="kw">c</span>(<span class="dv">21</span>,<span class="dv">32</span>,<span class="dv">11</span>), <span class="ot">TRUE</span>, <span class="fl">51.23</span>, <span class="fl">119.1</span>)
<span class="kw">print</span>(list_data)</code></pre>
<pre style="border: 1px grey dotted;"><code>[[1]]
[1] "Red"

[[2]]
[1] "Green"

[[3]]
[1] 21 32 11

[[4]]
[1] TRUE

[[5]]
[1] 51.2

[[6]]
[1] 119
</code></pre>
<p>　
### Naming List Elements</p>
<p>The list elements can be given names and they can be accessed using these names.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Create a list containing a vector, a matrix and a list.</span>
list_data &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;Jan&quot;</span>,<span class="st">&quot;Feb&quot;</span>,<span class="st">&quot;Mar&quot;</span>), <span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">2</span>,<span class="dv">8</span>), <span class="dt">nrow =</span> <span class="dv">2</span>),
   <span class="kw">list</span>(<span class="st">&quot;green&quot;</span>,<span class="fl">12.3</span>))

<span class="co">#Give names to the elements in the list.</span>
<span class="kw">names</span>(list_data) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1st Quarter&quot;</span>, <span class="st">&quot;A_Matrix&quot;</span>, <span class="st">&quot;A Inner list&quot;</span>)

<span class="co">#Show the list.</span>
<span class="kw">print</span>(list_data)</code></pre>
<pre style="border: 1px grey dotted;"><code>$`1st Quarter`
[1] "Jan" "Feb" "Mar"

$A_Matrix
     [,1] [,2] [,3]
[1,]    3    5   -2
[2,]    9    1    8

$`A Inner list`
$`A Inner list`[[1]]
[1] "green"

$`A Inner list`[[2]]
[1] 12.3
</code></pre>
<div class="sidebar">
<p>這裡討論一下為甚麼在R語言堅持<code>&lt;-</code>而不是<code>=</code>的一個原因</p>
<p>將列名的vector和list ,白話文意思就是將每個元素命名。</p>
<pre class="sourceCode r"><code class="sourceCode r">x=<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
<span class="kw">names</span>(x)&lt;-<span class="kw">c</span>(<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>)
x</code></pre>
<pre style="border: 1px grey dotted;"><code>a b c 
1 2 3 
</code></pre>
<p>一般的程式語言,不會用到這種文法,例如,在其他程式語言中,直覺上應該是有一個<code>names()</code>,然後用法如下:</p>
<pre class="sourceCode c"><code class="sourceCode c">names(x,c(<span class="ch">&#39;a&#39;</span>,<span class="ch">&#39;b&#39;</span>,<span class="ch">&#39;c&#39;</span>) )</code></pre>
<p>但如果是matrix,被命名的就是欄位?答案是:<strong>NO</strong>。而是紀錄名稱?答案也是<strong>NO</strong>.而是給每個元素命名。</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="kw">matrix</span>(<span class="kw">runif</span>(<span class="dv">9</span>),<span class="dt">nrow=</span><span class="dv">3</span>)
<span class="kw">names</span>(x)&lt;-<span class="kw">c</span>(<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>)
x</code></pre>
<pre style="border: 1px grey dotted;"><code>       [,1]   [,2]  [,3]
[1,] 0.0808 0.1572 0.498
[2,] 0.8343 0.0074 0.290
[3,] 0.6008 0.4664 0.733
attr(,"names")
[1] "a" "b" "c" NA  NA  NA  NA  NA  NA 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rownames</span>(x)&lt;-<span class="kw">c</span>(<span class="st">&#39;x&#39;</span>,<span class="st">&#39;y&#39;</span>,<span class="st">&#39;z&#39;</span>)
<span class="kw">print</span>(x,<span class="dt">row.names=</span>T)</code></pre>
<pre style="border: 1px grey dotted;"><code>    [,1]   [,2]  [,3]
x 0.0808 0.1572 0.498
y 0.8343 0.0074 0.290
z 0.6008 0.4664 0.733
attr(,"names")
[1] "a" "b" "c" NA  NA  NA  NA  NA  NA 
</code></pre>
<p>問:在上面的例子中x是一個矩陣,x[“a”]會傳回甚麼?</p>
</div>
<p>但是在data.frame的結構中,names()&lt;- 給定的是欄位名稱</p>
<pre class="sourceCode r"><code class="sourceCode r">xd&lt;-<span class="kw">data.frame</span>(x)
<span class="kw">names</span>(xd)&lt;-<span class="kw">c</span>(<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>)
xd</code></pre>
<pre style="border: 1px grey dotted;"><code>       a      b     c
x 0.0808 0.1572 0.498
y 0.8343 0.0074 0.290
z 0.6008 0.4664 0.733
</code></pre>
</div>
<div id="-list-" class="section level3">
<h3><span class="header-section-number">2.8.2</span> 存取 List 元素</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 3個元素,分別是list, matrix, list</span>
list_data &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;Jan&quot;</span>,<span class="st">&quot;Feb&quot;</span>,<span class="st">&quot;Mar&quot;</span>), <span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">2</span>,<span class="dv">8</span>), <span class="dt">nrow =</span> <span class="dv">2</span>),
   <span class="kw">list</span>(<span class="st">&quot;green&quot;</span>,<span class="fl">12.3</span>))

<span class="co"># 給名稱</span>
<span class="kw">names</span>(list_data) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1st Quarter&quot;</span>, <span class="st">&quot;A_Matrix&quot;</span>, <span class="st">&quot;A Inner list&quot;</span>)

<span class="co"># Access the first element of the list.</span>
<span class="kw">print</span>(list_data[<span class="dv">1</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>$`1st Quarter`
[1] "Jan" "Feb" "Mar"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Access the thrid element. As it is also a list, all its elements will be printed.</span>
<span class="kw">print</span>(list_data[<span class="dv">3</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>$`A Inner list`
$`A Inner list`[[1]]
[1] "green"

$`A Inner list`[[2]]
[1] 12.3
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Access the list element using the name of the element.</span>
<span class="kw">print</span>(list_data<span class="op">$</span>A_Matrix)</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2] [,3]
[1,]    3    5   -2
[2,]    9    1    8
</code></pre>
</div>
<div id="manipulating-list-elements" class="section level3">
<h3><span class="header-section-number">2.8.3</span> Manipulating List Elements</h3>
<p>We can add, delete and update list elements as shown below. We can add and delete elements only at the end of a list. But we can update any element.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a list containing a vector, a matrix and a list.</span>
list_data &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;Jan&quot;</span>,<span class="st">&quot;Feb&quot;</span>,<span class="st">&quot;Mar&quot;</span>), <span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="op">-</span><span class="dv">2</span>,<span class="dv">8</span>), <span class="dt">nrow =</span> <span class="dv">2</span>),
   <span class="kw">list</span>(<span class="st">&quot;green&quot;</span>,<span class="fl">12.3</span>))

<span class="co"># Give names to the elements in the list.</span>
<span class="kw">names</span>(list_data) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1st Quarter&quot;</span>, <span class="st">&quot;A_Matrix&quot;</span>, <span class="st">&quot;A Inner list&quot;</span>)

<span class="co"># Add element at the end of the list.</span>
list_data[<span class="dv">4</span>] &lt;-<span class="st"> &quot;New element&quot;</span>
<span class="kw">print</span>(list_data[<span class="dv">4</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>[[1]]
[1] "New element"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Remove the last element.</span>
list_data[<span class="dv">4</span>] &lt;-<span class="st"> </span><span class="ot">NULL</span>

<span class="co"># Print the 4th Element.</span>
<span class="kw">print</span>(list_data[<span class="dv">4</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>$<NA>
NULL
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Update the 3rd Element.</span>
list_data[<span class="dv">3</span>] &lt;-<span class="st"> &quot;updated element&quot;</span>
<span class="kw">print</span>(list_data[<span class="dv">3</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>$`A Inner list`
[1] "updated element"
</code></pre>
</div>
<div id="merging-lists" class="section level3">
<h3><span class="header-section-number">2.8.4</span> Merging Lists</h3>
<p>You can merge many lists into one list by placing all the lists inside one list() function.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create two lists.</span>
list1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
list2 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;Sun&quot;</span>,<span class="st">&quot;Mon&quot;</span>,<span class="st">&quot;Tue&quot;</span>)

<span class="co"># Merge the two lists.</span>
merged.list &lt;-<span class="st"> </span><span class="kw">c</span>(list1,list2)

<span class="co"># Print the merged list.</span>
<span class="kw">print</span>(merged.list)</code></pre>
<pre style="border: 1px grey dotted;"><code>[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

[[4]]
[1] "Sun"

[[5]]
[1] "Mon"

[[6]]
[1] "Tue"
</code></pre>
<p>我們說函數<code>c()</code>是一個處理向量的函數,但是這裡的list裡面有多個型態,所以為甚麼用<code>c()</code>?
因為,對<code>c()</code>而言,兩個元素都是list 。而在R語言中,向量的意思,只要元素同型態就行。</p>
</div>
<div id="list--vector" class="section level3">
<h3><span class="header-section-number">2.8.5</span> List 轉 Vector</h3>
<p>函數 <code>unlist()</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create lists.</span>
list1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)
<span class="kw">print</span>(list1)</code></pre>
<pre style="border: 1px grey dotted;"><code>[[1]]
[1] 1 2 3 4 5
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">list2 &lt;-<span class="kw">list</span>(<span class="dv">10</span><span class="op">:</span><span class="dv">14</span>)
<span class="kw">print</span>(list2)</code></pre>
<pre style="border: 1px grey dotted;"><code>[[1]]
[1] 10 11 12 13 14
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Convert the lists to vectors.</span>
v1 &lt;-<span class="st"> </span><span class="kw">unlist</span>(list1)
v2 &lt;-<span class="st"> </span><span class="kw">unlist</span>(list2)

<span class="kw">print</span>(v1)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1 2 3 4 5
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(v2)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 10 11 12 13 14
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Now add the vectors</span>
result &lt;-<span class="st"> </span>v1<span class="op">+</span>v2
<span class="kw">print</span>(result)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 11 13 15 17 19
</code></pre>
</div>
<div id="vector-list" class="section level3">
<h3><span class="header-section-number">2.8.6</span> 比較vector, list中,字串的問題</h3>
<ol style="list-style-type: decimal">
<li>Q length()函數可以知道vector,list 的長度,但是為甚麼length(“hello”)的長度是1?</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r">a&lt;-<span class="kw">c</span>(<span class="st">&quot;hello&quot;</span>,<span class="st">&quot;r&quot;</span>)
<span class="kw">length</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 2
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(a[<span class="dv">1</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(a[[<span class="dv">1</span>]])</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nchar</span>(a[<span class="dv">1</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 5
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="st">&quot;hello&quot;</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1
</code></pre>
<ol style="list-style-type: decimal">
<li>Q</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r">a&lt;-<span class="kw">list</span>(<span class="st">&quot;hello&quot;</span>,<span class="st">&quot;r&quot;</span>)
<span class="kw">length</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 2
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(a[<span class="dv">1</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(a[[<span class="dv">1</span>]])</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1
</code></pre>
<p>上面兩個答案的問題,和R怎樣建立字串有關
我猜是
“hello” 的記憶體結構是 list(ptr) ,ptr-&gt;“hello”
也就是說紀錄在list中,當我問說length(“hello”)的時候,list的長度都是1。<br />
總之,字串長度函數<code>nchar()</code>。</p>
</div>
</div>
<div id="data-set-build-in" class="section level2">
<h2><span class="header-section-number">2.9</span> data set build in</h2>
<div id="list-of-pre-loaded-data" class="section level3">
<h3><span class="header-section-number">2.9.1</span> List of pre-loaded data</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>()</code></pre>
<p>Loading a built-in R data</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(mtcars) </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(mtcars)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 32
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(mtcars)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 11
</code></pre>

</div>
</div>
<div id="vector-" class="section level2">
<h2><span class="header-section-number">2.10</span> vector 函數範例</h2>
<div id="cbindrbind" class="section level3">
<h3><span class="header-section-number">2.10.1</span> cbind,rbind</h3>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="kw">runif</span>(<span class="dv">5</span>)
y&lt;-<span class="kw">runif</span>(<span class="dv">6</span>)
<span class="kw">cbind</span>(x,y)</code></pre>
<pre style="color: red;"><code>Warning in cbind(x, y): number of rows of result is not a multiple of
vector length (arg 1)
</code></pre>
<pre style="border: 1px grey dotted;"><code>          x     y
[1,] 0.0808 0.466
[2,] 0.8343 0.498
[3,] 0.6008 0.290
[4,] 0.1572 0.733
[5,] 0.0074 0.773
[6,] 0.0808 0.875
</code></pre>
</div>
<div id="diff" class="section level3">
<h3><span class="header-section-number">2.10.2</span> 函數diff</h3>
<p>Arguments<br />
* x: a numeric vector or matrix containing the values to be differenced.<br />
* lag: an integer indicating which lag to use.<br />
* differences: an integer indicating the order of the difference.<br />
例如
diff(x,lag=d,differences=n)
x[(1+d):n] - x[1:(n-d)]</p>
</div>
</div>
<div id="-" class="section level2">
<h2><span class="header-section-number">2.11</span> 練習: 刪除向量中的一個元素</h2>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</code></pre>
<p>如何刪除x中的第2個元素 ?</p>
<p>hint:<br />
數字向量元素的刪除 ，不能像是list[2]&lt;-NULL ，請問你的解法？ 並說明</p>
<p>物件元素的刪除，簡單一點的像是list，</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="kw">list</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
x[<span class="dv">2</span>]&lt;-<span class="ot">NULL</span>
x</code></pre>
<p>但是向量元素的刪除沒有捷徑</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
x[<span class="dv">2</span>]&lt;-<span class="ot">NULL</span></code></pre>
<pre style="color: red;"><code>Error in x[2] <- NULL:
  置換的長度為零
</code></pre>
<p>因此，需要變通的辦法<br />
方法1：</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
t&lt;-<span class="kw">as.list</span>(x) <span class="co"># note: 使用list(x)而不是as.list(x)會有什麼不同</span>
t[<span class="dv">2</span>]&lt;-<span class="ot">NULL</span>
x&lt;-<span class="kw">unlist</span>(t)
x</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1 3
</code></pre>
<p>方法2：</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
y&lt;-x[<span class="op">-</span><span class="dv">2</span>]
x&lt;-y</code></pre>
<p>練習：改為函數</p>
<pre class="sourceCode r"><code class="sourceCode r">delElement&lt;-<span class="cf">function</span>(x,idx){
  <span class="cf">if</span> (<span class="kw">is.vector</span>(x)){
    t&lt;-<span class="kw">as.list</span>(x)
    t[idx]&lt;-<span class="ot">NULL</span>
    t&lt;-<span class="kw">unlist</span>(t)
    <span class="kw">return</span>(t) 
  } <span class="cf">else</span> {
    <span class="kw">stop</span>(<span class="st">&#39;must be vector&#39;</span>)
  }

}
x&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
x&lt;-<span class="kw">delElement</span>(x,<span class="dv">2</span>)
x</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1 3
</code></pre>
<div id="adding-attributes-to-vectors" class="section level3">
<h3><span class="header-section-number">2.11.1</span> <a href="http://uc-r.github.io/vectors_attributes">Adding Attributes to Vectors</a></h3>
<p>The attributes that you can add to vectors includes names and comments. If we continue with our vector v1 we can see that the vector currently has no attributes:</p>
<pre class="sourceCode r"><code class="sourceCode r">v1 &lt;-<span class="st"> </span><span class="dv">8</span><span class="op">:</span><span class="dv">17</span>
<span class="kw">attributes</span>(v1)</code></pre>
<pre style="border: 1px grey dotted;"><code>NULL
</code></pre>
<p>We can add names to vectors using two approaches. The first uses names() to assign names to each element of the vector. The second approach is to assign names when creating the vector.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># assigning names to a pre-existing vector</span>
<span class="kw">names</span>(v1) &lt;-<span class="st"> </span>letters[<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(v1)]
v1</code></pre>
<pre style="border: 1px grey dotted;"><code> a  b  c  d  e  f  g  h  i  j 
 8  9 10 11 12 13 14 15 16 17 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(v1)</code></pre>
<pre style="border: 1px grey dotted;"><code>$names
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
</code></pre>
<p>那，什麼是<code>names(v1)</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(v1)</code></pre>
<pre style="border: 1px grey dotted;"><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
</code></pre>
<p>也就是說names()函數返回每個元素的名子，而<code>attributes()</code>返回的是有什麼屬性，也是函數名稱字面上的意思。但是再仔細看看，可以發現指派attribute 給</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(v1)&lt;-<span class="kw">list</span>(<span class="dt">x=</span><span class="st">&#39;&#39;</span>,<span class="dt">y=</span><span class="st">&#39;&#39;</span>,<span class="dt">z=</span><span class="st">&#39;&#39;</span>)
v1</code></pre>
<pre style="border: 1px grey dotted;"><code> [1]  8  9 10 11 12 13 14 15 16 17
attr(,"x")
[1] ""
attr(,"y")
[1] ""
attr(,"z")
[1] ""
</code></pre>
<p>測試是否可以自行加入attributes，然後讓<code>names()</code>可以運作，如下：</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(v1)&lt;-<span class="kw">list</span>(<span class="dt">names=</span>letters[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>])
v1</code></pre>
<pre style="border: 1px grey dotted;"><code> a  b  c  d  e  f  g  h  i  j 
 8  9 10 11 12 13 14 15 16 17 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(v1)</code></pre>
<pre style="border: 1px grey dotted;"><code>$names
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(v1)</code></pre>
<pre style="border: 1px grey dotted;"><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"
</code></pre>
<p>上面這個程式暗示了什麼？
&gt;函數<code>names()</code>只是<code>attributes()&lt;-</code>的一個特例，我們總是可以自行加入一個屬性，名稱為<code>names</code>讓函數<code>names()</code>可以把每個元素的名稱列印出來。</p>
<p>後面這段程式碼只是對照一下之前每個元素加入名稱的作法，本身沒意義：</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># adding names when creating vectors</span>
v2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">name1 =</span> <span class="dv">1</span>, <span class="dt">name2 =</span> <span class="dv">2</span>, <span class="dt">name3 =</span> <span class="dv">3</span>)
v2</code></pre>
<pre style="border: 1px grey dotted;"><code>name1 name2 name3 
    1     2     3 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(v2)</code></pre>
<pre style="border: 1px grey dotted;"><code>$names
[1] "name1" "name2" "name3"
</code></pre>
<p>也可以加入註解：</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">comment</span>(v1) &lt;-<span class="st"> &quot;This is a comment on a vector&quot;</span>
v1</code></pre>
<pre style="border: 1px grey dotted;"><code> a  b  c  d  e  f  g  h  i  j 
 8  9 10 11 12 13 14 15 16 17 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(v1)</code></pre>
<pre style="border: 1px grey dotted;"><code>$names
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"

$comment
[1] "This is a comment on a vector"
</code></pre>

</div>
</div>
<div id="matrix" class="section level2">
<h2><span class="header-section-number">2.12</span> matrix</h2>
<p>矩陣的建立有多種方式,其中一種是利用向量轉填矩陣，填入的方式預設是以coumn為主要方向。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>),<span class="dv">2</span>,<span class="dv">3</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
</code></pre>
<p>問題: 怎樣產生<br />
1 2 3<br />
4 5 6<br />
的矩陣</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">diag</span>(<span class="dv">1</span>, <span class="dt">nrow =</span> <span class="dv">5</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2] [,3] [,4] [,5]
[1,]    1    0    0    0    0
[2,]    0    1    0    0    0
[3,]    0    0    1    0    0
[4,]    0    0    0    1    0
[5,]    0    0    0    0    1
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>), <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>, <span class="dt">dimnames =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;r1&quot;</span>, <span class="st">&quot;r2&quot;</span>, <span class="st">&quot;r3&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;c1&quot;</span>, <span class="st">&quot;c2&quot;</span>, <span class="st">&quot;c3&quot;</span>)))</code></pre>
<pre style="border: 1px grey dotted;"><code>   c1 c2 c3
r1  1  2  3
r2  4  5  6
r3  7  8  9
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">m1 &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>), <span class="dt">ncol =</span> <span class="dv">3</span>)
<span class="kw">rownames</span>(m1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;r1&quot;</span>, <span class="st">&quot;r2&quot;</span>, <span class="st">&quot;r3&quot;</span>)
<span class="kw">colnames</span>(m1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;c1&quot;</span>, <span class="st">&quot;c2&quot;</span>, <span class="st">&quot;c3&quot;</span>)

m1</code></pre>
<pre style="border: 1px grey dotted;"><code>   c1 c2 c3
r1  1  4  7
r2  2  5  8
r3  3  6  9
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"> B =<span class="st"> </span><span class="kw">matrix</span>( 
    <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">7</span>), 
    <span class="dt">nrow=</span><span class="dv">3</span>, 
    <span class="dt">ncol=</span><span class="dv">2</span>) 
B</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2]
[1,]    2    1
[2,]    4    5
[3,]    3    7
</code></pre>
<div id="transpose" class="section level3">
<h3><span class="header-section-number">2.12.1</span> Transpose</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t</span>(B)</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2] [,3]
[1,]    2    4    3
[2,]    1    5    7
</code></pre>
</div>
<div id="section-2.12.2" class="section level3">
<h3><span class="header-section-number">2.12.2</span> 合併矩陣</h3>
<p>利用函數<code>cbind()</code> 可以合併同樣橫行數目的兩個矩陣,例如這裡C也是3個橫行:</p>
<pre class="sourceCode r"><code class="sourceCode r">C =<span class="st"> </span><span class="kw">matrix</span>( 
   <span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">2</span>), 
   <span class="dt">nrow=</span><span class="dv">3</span>, 
   <span class="dt">ncol=</span><span class="dv">1</span>) 
C</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1]
[1,]    7
[2,]    4
[3,]    2
</code></pre>
<p>和B合併</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cbind</span>(B, C) </code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2] [,3]
[1,]    2    1    7
[2,]    4    5    4
[3,]    3    7    2
</code></pre>
<p>同樣的,<code>rbind()</code> 也可以合併直行數目相同的兩個矩陣:</p>
<pre class="sourceCode r"><code class="sourceCode r"> D =<span class="st"> </span><span class="kw">matrix</span>( 
   <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">2</span>), 
   <span class="dt">nrow=</span><span class="dv">1</span>, 
   <span class="dt">ncol=</span><span class="dv">2</span>) 
D</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2]
[1,]    6    2
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rbind</span>(B, D) </code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2]
[1,]    2    1
[2,]    4    5
[3,]    3    7
[4,]    6    2
</code></pre>
<p>將矩陣解構回向量:
可以利用<code>c()</code> 會把矩陣所有的直行都合併成一個直行.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(B) </code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 2 4 3 1 5 7
</code></pre>
<p>unlist ?</p>
<p><strong>練習:利用上面的m1 回答下面的問題:</strong><br />
m1[1, 2]</p>
<p>m1[1:2, 2:3]</p>
<p>m1[1,]
m1[,2]
m1[1:2,]
m1[, 2:3]</p>
<p>m1[-1,]
m1[,-2]</p>
<p>m1[c(“r1”, “r3”), c(“c1”, “c3”)]</p>
<p>m1[1]
m1[9]
m1[3:7]</p>
<p>m1 &gt; 3</p>
<p>m1[m1 &gt; 3]</p>
<p>m1 + m1
m1 - 2<em>m1
m1 </em> m1
m1 / m1
m1 ^ 2
m1 %*% m1</p>
<p>t(m1)</p>

</div>
</div>
<div id="section-2.13" class="section level2">
<h2><span class="header-section-number">2.13</span> 字串函數</h2>
<div id="asic-character-string-functions-provided-by-r" class="section level4">
<h4><span class="header-section-number">2.13.0.1</span> asic character string functions provided by R:</h4>
<ul>
<li>nchar: string length<br />
</li>
<li>paste: concatenate strings</li>
<li>substr: substring</li>
<li>toupper: convert entire string to uppercase</li>
<li>tolower: convert entire string to lowercase</li>
<li>chartr: character map replacement (like “tr”)</li>
<li>strtrim：trunates string</li>
</ul>
<p>nchar, substr, toupper, tolower will accept string vectors as arguments and return vector results.</p>
<p>strtrim accepts both a vector of strings and a vector of truncation positions.</p>
<ul>
<li><code>\'</code>: 等同於 <code>&quot;'&quot;</code> .<br />
</li>
<li><code>\&quot;</code>: 等同於 <code>'&quot;'</code>.<br />
</li>
<li><code>\n</code>: newline.<br />
</li>
<li><code>\r</code>: carriage return.<br />
</li>
<li><code>\t</code>: tab character.</li>
</ul>
<blockquote>
<p>Note: <code>cat()</code> and <code>print()</code> 處理逃逸字元的方式不一樣如果要在螢幕上解讀上面的字串,需要的是 <code>cat()</code>.</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="st">&quot;a</span><span class="ch">\n</span><span class="st">b&quot;</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "a\nb"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cat</span>(<span class="st">&quot;a</span><span class="ch">\n</span><span class="st">b&quot;</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>a
b
</code></pre>
<p>問題:
1. 解釋paste0(c(1,2),c(3,4),collapse=’’)
2. 怎樣得到“1234”</p>
</div>
<div id="macro" class="section level3">
<h3><span class="header-section-number">2.13.1</span> 應用範例macro</h3>
<p><strong>version 1</strong></p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="st"> &quot;${1} is good&quot;</span>
<span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">$</span><span class="ch">\\</span><span class="st">{1</span><span class="ch">\\</span><span class="st">}&quot;</span>,<span class="st">&quot;dog&quot;</span>,x)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "dog is good"
</code></pre>
<p>** version 2 to function**</p>
<pre class="sourceCode r"><code class="sourceCode r">mstr&lt;-<span class="cf">function</span> (src,mto)
{
  <span class="kw">return</span> (<span class="kw">gsub</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">$</span><span class="ch">\\</span><span class="st">{1</span><span class="ch">\\</span><span class="st">}&quot;</span>,mto,src))
  
}
x&lt;-<span class="st"> &quot;${1} is good&quot;</span>
<span class="kw">mstr</span>(x,<span class="st">&quot;dog&quot;</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "dog is good"
</code></pre>
</div>
<div id="paste" class="section level3">
<h3><span class="header-section-number">2.13.2</span> paste</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste0</span>(<span class="st">&quot;x&quot;</span>,<span class="st">&quot;y&quot;</span>,<span class="st">&quot;z&quot;</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "xyz"
</code></pre>
</div>
<div id="misc" class="section level3">
<h3><span class="header-section-number">2.13.3</span> misc</h3>
<p>.</p>
<p>The get() and assign() functions allow you to reference objects by
character strings, and as.name() will convert a string into a reference
(you would then probably need to use substitute() to create an expression
and eval()) to evaluate it.</p>
<p>eg</p>
<pre><code>assign(&quot;a&quot;,get(&quot;b&quot;))</code></pre>
<p>does
a&lt;-b</p>
<p>Often there is a better way: the objects can be stored in a list, making
it possible to use character strings directly to reference them</p>
<p>If obj&lt;-list(a=1,b=2)</p>
<p>then obj[[“a”]] is a reference to the “a” element and you can do eg</p>
<p>obj[[“a”]]&lt;-otherobj[[“b”]]</p>

</div>
</div>
<div id="factors" class="section level2">
<h2><span class="header-section-number">2.14</span> Factors</h2>
<p>R也能把資料存為factor(store data is as a factor)。
在大部分實驗中,某些解釋變數經常有不同程度的測試。
大意如下：<br />
&gt;… includes trials for different levels of some explanatory variable.
&gt;The different levels are also called factors.</p>
<div id="factors" class="section level3">
<h3><span class="header-section-number">2.14.1</span> 探索一下factors</h3>
<pre class="sourceCode r"><code class="sourceCode r">fert =<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">50</span>,<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">10</span>,<span class="dv">50</span>,<span class="dv">20</span>)
fert =<span class="st"> </span><span class="kw">factor</span>(fert,<span class="dt">levels=</span><span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">50</span>),<span class="dt">ordered=</span><span class="ot">TRUE</span>)</code></pre>
<p>levels()可以顯示factor的標籤</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(fert)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "10" "20" "50"
</code></pre>
<p>fert 的內容，如果忽略標籤本身，其實已經是數字。</p>
<pre class="sourceCode r"><code class="sourceCode r">fert</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 10 20 20 50 10 20 10 50 20
Levels: 10 < 20 < 50
</code></pre>
<p>計算平均</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(fert)</code></pre>
<pre style="color: red;"><code>Warning in mean.default(fert): argument is not numeric or logical:
returning NA
</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] NA
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="kw">as.numeric</span>(<span class="kw">levels</span>(fert)[fert]))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 23.3
</code></pre>
<p>解釋：<br />
levels(fert) 產生一個「字串向量」，內容為10, 20, 50，如下可證：</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="kw">levels</span>(fert))</code></pre>
<pre style="border: 1px grey dotted;"><code> chr [1:3] "10" "20" "50"
</code></pre>
<p>然後如果把fert想程式數字內容，例如(1,2,1) 則，這是索引。就像這樣<br />
c(“a”,“b”,“c”)[c(1,1,2,3,2)] ==&gt; a,a,b,c,b 。</p>
<p>上面的問題，可以簡化為：找回原來還沒被factor的向量。</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>)
x&lt;-<span class="kw">factor</span>(x) <span class="co"># 現在x是一個factor</span>

x&lt;-<span class="kw">levels</span>(x)[x] <span class="co">#現在又被轉回原來的x</span></code></pre>
</div>
<div id="factor" class="section level3">
<h3><span class="header-section-number">2.14.2</span> 探索一下factor</h3>
<pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>))</code></pre>
<p>預期答案是factor,ok。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "factor"
</code></pre>
<p>因為a已經被編碼，預期是numeric，這裡答案直接給定integer:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "integer"
</code></pre>
<p>a是一個factor,所以a<a href="rbook-.html#section"></a>代表a的一個子集合，因此結果看起來也是類似原來a的型態：</p>
<pre class="sourceCode r"><code class="sourceCode r">a[<span class="dv">1</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] A
Levels: A B C
</code></pre>
<p>驗證是不是和上面的表示方式一樣：</p>
<pre class="sourceCode r"><code class="sourceCode r">a</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] A A B A B B C A C
Levels: A B C
</code></pre>
<p>所以，a,a<a href="rbook-.html#section"></a>都是類型為factor的變數。</p>
<p>按照之間<code>[]</code>和<code>[[]]</code>的規則，這裡會出現什麼？</p>
<pre class="sourceCode r"><code class="sourceCode r">a[[<span class="dv">1</span>]]</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] A
Levels: A B C
</code></pre>
<p>出現的結果和a[1]一樣，這說明了，a的結構不是list,利用str()函數看一下確認：</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code> Factor w/ 3 levels "A","B","C": 1 1 2 1 2 2 3 1 3
</code></pre>
總之，a[1] a[[1]] 都是Factor 沒有[ 和 [[ 的分別。這很好記，因為這個factor也是r的內建資料型態。<br />
其他驗證如下，自行推敲：
<pre><code>
> typeof(a[[1]])
[1] "integer"
> typeof(a[1])
[1] "integer"
> class(a[[1]])
[1] "factor"
> class(a[1])
[1] "factor"

</code></pre>
<p>又有新的問題了，到底table(a),summary(a)的資料結構是什麼？</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="kw">table</span>(a))</code></pre>
<pre style="border: 1px grey dotted;"><code> 'table' int [1:3(1d)] 4 3 2
 - attr(*, "dimnames")=List of 1
  ..$ a: chr [1:3] "A" "B" "C"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="kw">summary</span>(a))</code></pre>
<pre style="border: 1px grey dotted;"><code> Named int [1:3] 4 3 2
 - attr(*, "names")= chr [1:3] "A" "B" "C"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">table</span>(a))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "table"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">summary</span>(a))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "integer"
</code></pre>
<p>又來一個讓人無言的地方，輸出樣子看起來很像，但是結構一個是類別<code>table</code>一個是「整數向量」，然後每個元素都是因子的發生次數，帶有因子名字，這裡是“A”,“B”,“C”。</p>
</div>
<div id="factor-read.csv" class="section level3">
<h3><span class="header-section-number">2.14.3</span> factor 和函數read.csv()</h3>
<p>read.csv() 通常產生一個data.frame的類別。但是在讀檔的時候，如果遇到字串欄位，會將字串欄位預設轉為factor欄位。</p>
<p>觀察carbon dioxide 對樹木的生長速率 trees91.csv <a href="The%20original%20spreadsheet%20is%20located%20at%20http://cdiac.ornl.gov/ftp/ndp061a/trees91.wk1.">1^</a>:</p>
<pre class="sourceCode r"><code class="sourceCode r">tree =<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;./resources/trees91.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>);
<span class="kw">attributes</span>(tree)</code></pre>
<pre style="border: 1px grey dotted;"><code>$names
 [1] "C"      "N"      "CHBR"   "REP"    "LFBM"   "STBM"   "RTBM"  
 [8] "LFNCC"  "STNCC"  "RTNCC"  "LFBCC"  "STBCC"  "RTBCC"  "LFCACC"
[15] "STCACC" "RTCACC" "LFKCC"  "STKCC"  "RTKCC"  "LFMGCC" "STMGCC"
[22] "RTMGCC" "LFPCC"  "STPCC"  "RTPCC"  "LFSCC"  "STSCC"  "RTSCC" 

$class
[1] "data.frame"

$row.names
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
[24] 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46
[47] 47 48 49 50 51 52 53 54
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(tree)</code></pre>
<pre style="border: 1px grey dotted;"><code> [1] "C"      "N"      "CHBR"   "REP"    "LFBM"   "STBM"   "RTBM"  
 [8] "LFNCC"  "STNCC"  "RTNCC"  "LFBCC"  "STBCC"  "RTBCC"  "LFCACC"
[15] "STCACC" "RTCACC" "LFKCC"  "STKCC"  "RTKCC"  "LFMGCC" "STMGCC"
[22] "RTMGCC" "LFPCC"  "STPCC"  "RTPCC"  "LFSCC"  "STSCC"  "RTSCC" 
</code></pre>
<p>A description of the data file is located at <a href="http://cdiac.ornl.gov/ftp/ndp061a/ndp061a.txt" class="uri">http://cdiac.ornl.gov/ftp/ndp061a/ndp061a.txt</a> .</p>
</div>
<div id="factor-summary" class="section level3">
<h3><span class="header-section-number">2.14.4</span> factor 和函數summary()</h3>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(tree<span class="op">$</span>CHBR)</code></pre>
<pre style="border: 1px grey dotted;"><code> A1  A2  A3  A4  A5  A6  A7  B1  B2  B3  B4  B5  B6  B7  C1  C2  C3  C4 
  3   1   1   3   1   3   1   1   3   3   3   3   3   3   1   3   1   3 
 C5  C6  C7 CL6 CL7  D1  D2  D3  D4  D5  D6  D7 
  1   1   1   1   1   1   1   3   1   1   1   1 
</code></pre>
<p>在CHBR這個欄位中,因為不全都是數字,因此R自動假定這是一個factor。
因此針對這個欄位<code>summary()</code>函數不會列出5個統計量,而是列出次數表。因為，一旦向量轉為一組factors, 5個基本統計量不再有意義。</p>
<p>但有些欄位例如C,也是一個factor。但是,R認定為數字,這時必須手動處理。<br />
以下將 tree$C 轉為 factor:</p>
<pre class="sourceCode r"><code class="sourceCode r">tree<span class="op">$</span>C</code></pre>
<pre style="border: 1px grey dotted;"><code> [1] 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3
[36] 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(tree<span class="op">$</span>C)</code></pre>
<pre style="border: 1px grey dotted;"><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1.00    2.00    2.00    2.52    3.00    4.00 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">tree<span class="op">$</span>C &lt;-<span class="st"> </span><span class="kw">factor</span>(tree<span class="op">$</span>C)
tree<span class="op">$</span>C</code></pre>
<pre style="border: 1px grey dotted;"><code> [1] 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3
[36] 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4
Levels: 1 2 3 4
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(tree<span class="op">$</span>C)</code></pre>
<pre style="border: 1px grey dotted;"><code> 1  2  3  4 
 8 23 10 13 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(tree<span class="op">$</span>C)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "1" "2" "3" "4"
</code></pre>
<p>node: <code>summary()</code> 函數，參考table一節。</p>
</div>
</div>
<div id="data-frames" class="section level2">
<h2><span class="header-section-number">2.15</span> Data Frames</h2>
<div id="data.frame" class="section level3">
<h3><span class="header-section-number">2.15.1</span> 簡單介紹一下手動建立data.frame</h3>
<p>3個欄位，分別是a,b,f</p>
<pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)
b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>)
levels &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>))
bubba &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">first =</span> a,
                      <span class="dt">second =</span> b,
                      <span class="dt">f =</span> levels)
bubba</code></pre>
<pre style="border: 1px grey dotted;"><code>  first second f
1     1      2 A
2     2      4 B
3     3      6 A
4     4      8 B
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(bubba)</code></pre>
<pre style="border: 1px grey dotted;"><code>     first          second    f    
 Min.   :1.00   Min.   :2.0   A:2  
 1st Qu.:1.75   1st Qu.:3.5   B:2  
 Median :2.50   Median :5.0        
 Mean   :2.50   Mean   :5.0        
 3rd Qu.:3.25   3rd Qu.:6.5        
 Max.   :4.00   Max.   :8.0        
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">bubba<span class="op">$</span>first</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1 2 3 4
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">bubba<span class="op">$</span>second</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 2 4 6 8
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">bubba<span class="op">$</span>f</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] A B A B
Levels: A B
</code></pre>
</div>
<div id="data-frame-" class="section level3">
<h3><span class="header-section-number">2.15.2</span> data frame 的常用函數：</h3>
<ul>
<li>head() - shows first 6 rows</li>
<li>tail() - shows last 6 rows</li>
<li>dim() - returns the dimensions of data frame (i.e. number of rows and number of columns)</li>
<li>nrow() - number of rows</li>
<li>ncol() - number of columns</li>
<li>str() - structure of data frame - name, type and preview of data in each column</li>
<li>names() - shows the names attribute for a data frame, which gives the column names.</li>
<li>sapply(dataframe, class) - shows the class of each column in the data frame</li>
</ul>
<p>回到之前利用read.csv讀入的data.frame : tree</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 順便看看結構</span>
<span class="kw">typeof</span>(tree)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "list"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(tree)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "data.frame"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.data.frame</span>(tree)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<p>既然tree是一個list,那麼<code>[]</code>和<code>[[]]</code>的應用就和之前討論的一樣：</p>
<pre class="sourceCode r"><code class="sourceCode r">tree[<span class="dv">1</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>   C
1  1
2  1
3  1
4  1
5  1
6  1
7  1
8  1
9  2
10 2
11 2
12 2
13 2
14 2
15 2
16 2
17 2
18 2
19 2
20 2
21 2
22 2
23 2
24 2
25 2
26 2
27 2
28 2
29 2
30 2
31 2
32 3
33 3
34 3
35 3
36 3
37 3
38 3
39 3
40 3
41 3
42 4
43 4
44 4
45 4
46 4
47 4
48 4
49 4
50 4
51 4
52 4
53 4
54 4
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">tree[[<span class="dv">1</span>]] </code></pre>
<pre style="border: 1px grey dotted;"><code> [1] 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3
[36] 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4
Levels: 1 2 3 4
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(tree[<span class="dv">1</span>]) <span class="co"># data.frame</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "data.frame"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(tree[[<span class="dv">1</span>]]) <span class="co"># integer</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "factor"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(tree[<span class="dv">1</span>]) <span class="co"># list</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "list"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(tree<span class="op">$</span>C) <span class="co"># integer</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "integer"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(tree[[<span class="dv">1</span>]]) <span class="co"># integer</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "integer"
</code></pre>
<p>tree[1] 是一個list<br />
tree[[1]] 外圍的tree<a href="rbook-.html#section"></a>首先被解讀為list類別,然後[1]傳到類別</p>
<blockquote>
<p>[[ vs [<br />
由typeof,class看起來<br />
[[抽取list中的元素
[只是分割list,中的subset</p>
</blockquote>
</div>
</div>
<div id="tables" class="section level2">
<h2><span class="header-section-number">2.16</span> Tables</h2>
<p>除了data frame 以外,還有table 可以用來組織資料。
這裡只看怎樣建立table,分析看其他章節。</p>
<div id="one-way-tables" class="section level3">
<h3><span class="header-section-number">2.16.1</span> One Way Tables</h3>
<p>table()指令:<br />
這個指令通常用來建立因子之間的關聯表(contingency table)。參數通常是一個「因子向量」(factor vector)。<br />
例如建立一個單因子關聯表（one way table）:</p>
<pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>))
table_a &lt;-<span class="st"> </span><span class="kw">table</span>(a)</code></pre>
<p>table_a：</p>
<pre class="sourceCode r"><code class="sourceCode r">table_a</code></pre>
<pre style="border: 1px grey dotted;"><code>a
A B C 
4 3 2 
</code></pre>
<p>attributes可以看出table_a裡面有哪些帶名元素</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(table_a)</code></pre>
<pre style="border: 1px grey dotted;"><code>$dim
[1] 3

$dimnames
$dimnames$a
[1] "A" "B" "C"


$class
[1] "table"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(table_a)</code></pre>
<pre style="border: 1px grey dotted;"><code>Number of cases in table: 9 
Number of factors: 1 
</code></pre>
<p>對照table(a)，直接把factor 變數，代入summary()看一下，結果是次數分配表（如下）</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>a
A B C 
4 3 2 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(a)</code></pre>
<pre style="border: 1px grey dotted;"><code>A B C 
4 3 2 
</code></pre>
<p>問題：如果我們知道A有4,個,B有3個,C有2個,能不能直接建立table?<br />
1. 先建立matrix<br />
2. 再加入欄位名稱<br />
3. 利用函數as.table()</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># step 1</span>
occur &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>), <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)
occur</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2] [,3]
[1,]    4    3    2
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#step 2</span>
<span class="kw">colnames</span>(occur) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)
occur</code></pre>
<pre style="border: 1px grey dotted;"><code>     A B C
[1,] 4 3 2
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#step 3</span>
occur &lt;-<span class="st"> </span><span class="kw">as.table</span>(occur)
occur</code></pre>
<pre style="border: 1px grey dotted;"><code>  A B C
A 4 3 2
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attributes</span>(occur)</code></pre>
<pre style="border: 1px grey dotted;"><code>$dim
[1] 1 3

$dimnames
$dimnames[[1]]
[1] "A"

$dimnames[[2]]
[1] "A" "B" "C"


$class
[1] "table"
</code></pre>
</div>
<div id="two-way-tables" class="section level3">
<h3><span class="header-section-number">2.16.2</span> Two Way Tables</h3>
<p>這個例子中有兩個問題:第1個問題的答案有“Never,” “Sometimes,” or “Always.”<br />
第2個問題的答案有 “Yes,” “No,” or “Maybe.”
兩個問題分別以向量a,b存放( The set of vectors “a,” and “b,” contain the response for each measurement.)</p>
<pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Sometimes&quot;</span>, <span class="st">&quot;Sometimes&quot;</span>, <span class="st">&quot;Never&quot;</span>, <span class="st">&quot;Always&quot;</span>, <span class="st">&quot;Always&quot;</span>, <span class="st">&quot;Sometimes&quot;</span>, <span class="st">&quot;Sometimes&quot;</span>, <span class="st">&quot;Never&quot;</span>)
b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Maybe&quot;</span>, <span class="st">&quot;Maybe&quot;</span>, <span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;Maybe&quot;</span>, <span class="st">&quot;Maybe&quot;</span>, <span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>, <span class="st">&quot;No&quot;</span>)
results &lt;-<span class="st"> </span><span class="kw">table</span>(a, b)
results</code></pre>
<pre style="border: 1px grey dotted;"><code>           b
a           Maybe No Yes
  Always        2  0   0
  Never         0  1   1
  Sometimes     2  1   1
</code></pre>
<p>在表格中,可以看到同時回答 “Maybe” “Sometimes” 的個數有幾個。</p>
<p>這裡是另一個直接由我們知道的數據建立table的例子</p>
<pre class="sourceCode r"><code class="sourceCode r">sexsmoke &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">70</span>, <span class="dv">120</span>, <span class="dv">65</span>, <span class="dv">140</span>), <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)
<span class="kw">rownames</span>(sexsmoke) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>)
<span class="kw">colnames</span>(sexsmoke) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;smoke&quot;</span>, <span class="st">&quot;nosmoke&quot;</span>)
sexsmoke &lt;-<span class="st"> </span><span class="kw">as.table</span>(sexsmoke)
sexsmoke</code></pre>
<pre style="border: 1px grey dotted;"><code>       smoke nosmoke
male      70     120
female    65     140
</code></pre>
</div>
</div>
<div id="oop" class="section level2">
<h2><span class="header-section-number">2.17</span> OOP</h2>
<p><a href="https://adv-r.hadley.nz/base-types.html">advance R</a>
### Base objects vs OO objects
辨別變數是基礎型別或是物件型別，可以簡單利用函數： <code>is.object()</code>:</p>
<p>基礎物件base object:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.object</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<p>[1] FALSE</p>
<p>物件導向物件 OO object</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.object</span>(mtcars)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<p>[1] TRUE</p>
<p>主要的區別在於基本物件沒有class 這個attribute</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attr</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="st">&quot;class&quot;</span>) <span class="co">#  NULL</span></code></pre>
<pre style="border: 1px grey dotted;"><code>NULL
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attr</span>(mtcars, <span class="st">&quot;class&quot;</span>) <span class="co"># [1] &quot;data.frame&quot;</span></code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "data.frame"
</code></pre>
<p>class()這個函數,不見得總是會和attr()的結果一致,因為，對基本物件而言,傳回的是後面討論,而不是 NULL。</p>
<div id="section-2.17.1" class="section level3">
<h3><span class="header-section-number">2.17.1</span> 變數屬性查詢函數</h3>
<p>names()
dimnames()
length()
dim(): 各維度長度
class() : 變數類別
table()：各類資料計數
str()：變數的資料結構(其實是一個list)</p>
<p>透過names()函數，可取得各種list元素的名稱,但是如果是data.frame則是顯示欄位名稱
islands是內建資料</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(islands)</code></pre>
<pre style="border: 1px grey dotted;"><code> Named num [1:48] 11506 5500 16988 2968 16 ...
 - attr(*, "names")= chr [1:48] "Africa" "Antarctica" "Asia" "Australia" ...
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">names</span>(islands)) </code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "Africa"       "Antarctica"   "Asia"         "Australia"   
[5] "Axel Heiberg" "Baffin"      
</code></pre>
<p>方形資料（例如，矩陣，table, data.frame)，可以透過dimnames()函數可顯示data.frame 橫行和直行的名稱 先橫行，然後直行。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dimnames</span>(USArrests) </code></pre>
<pre style="border: 1px grey dotted;"><code>[[1]]
 [1] "Alabama"        "Alaska"         "Arizona"        "Arkansas"      
 [5] "California"     "Colorado"       "Connecticut"    "Delaware"      
 [9] "Florida"        "Georgia"        "Hawaii"         "Idaho"         
[13] "Illinois"       "Indiana"        "Iowa"           "Kansas"        
[17] "Kentucky"       "Louisiana"      "Maine"          "Maryland"      
[21] "Massachusetts"  "Michigan"       "Minnesota"      "Mississippi"   
[25] "Missouri"       "Montana"        "Nebraska"       "Nevada"        
[29] "New Hampshire"  "New Jersey"     "New Mexico"     "New York"      
[33] "North Carolina" "North Dakota"   "Ohio"           "Oklahoma"      
[37] "Oregon"         "Pennsylvania"   "Rhode Island"   "South Carolina"
[41] "South Dakota"   "Tennessee"      "Texas"          "Utah"          
[45] "Vermont"        "Virginia"       "Washington"     "West Virginia" 
[49] "Wisconsin"      "Wyoming"       

[[2]]
[1] "Murder"   "Assault"  "UrbanPop" "Rape"    
</code></pre>
<p>方形資料，可以透過length()函數可顯示資料長度，但是如果是data.frame則顯示欄位數。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(islands) </code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 48
</code></pre>
<p>透過dim() 顯示方形資料的「資料筆數」和「欄位數目」，先「橫行」，後「直行」</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(USArrests) </code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 50  4
</code></pre>
<p>使用class()函數可知道變數類別</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(pi)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "numeric"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">Sys.Date</span>())</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "Date"
</code></pre>
<p>使用table()函數可知道向量中每個值出現幾次</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(iris<span class="op">$</span>Species) <span class="co">##統計結果</span></code></pre>
<pre style="border: 1px grey dotted;"><code>
    setosa versicolor  virginica 
        50         50         50 
</code></pre>
</div>
</div>
<div id="operator" class="section level2">
<h2><span class="header-section-number">2.18</span> operator %&gt;%</h2>
<p>%&gt;% 不是R基礎套件
而是定義再套件 magrittr (CRAN) 且常跟 dplyr (CRAN)搭配。</p>
<p>意思是把左邊(LHS)當成右邊(RHS)的參數。<br />
例如下面的例子: 資料框iris 用來當 head()的參數:
也就是說 iris %&gt;% head() 相當於 head(iris).</p>
<p>library(magrittr)
iris %&gt;% head()
Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1 5.1 3.5 1.4 0.2 setosa
2 4.9 3.0 1.4 0.2 setosa
3 4.7 3.2 1.3 0.2 setosa
4 4.6 3.1 1.5 0.2 setosa
5 5.0 3.6 1.4 0.2 setosa
6 5.4 3.9 1.7 0.4 setosa</p>
<p>為甚麼需要這樣用,下面是一個例子</p>
<p>iris %&gt;% head() %&gt;% summary()
類似的觀念, iris %&gt;% head() %&gt;% summary() 等同於summary(head(iris)).
也就是說,避免了使用巢狀呼叫。</p>

</div>
<div id="apply-family" class="section level2">
<h2><span class="header-section-number">2.19</span> apply family</h2>
<div id="apply" class="section level3">
<h3><span class="header-section-number">2.19.1</span> apply</h3>
<p>可以處理的對象包括 矩陣、資料集、陣列(二維、多維)，可以指定直行、橫行。</p>
<p>函數定義：</p>
<pre><code>apply(X, MARGIN, FUN, ...)</code></pre>
<p>參數列表：
- X : 矩陣matrix、資料集dataframe 、陣列 array
- MARGIN : 1表示橫行，2表示直行
- FUN : the function to be applied<br />
- … : optional arguments to FUN</p>
<p>範例1</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="kw">matrix</span>(<span class="dv">1</span>,<span class="dt">ncol=</span><span class="dv">4</span>,<span class="dt">nrow=</span><span class="dv">3</span>);x</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2] [,3] [,4]
[1,]    1    1    1    1
[2,]    1    1    1    1
[3,]    1    1    1    1
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(x,<span class="dv">1</span>,sum)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 4 4 4
</code></pre>
<p>範例：</p>
<p>有一個list,裡面有2個欄位，分別是x1,x2,想要分別算出每個欄位的最小和最大</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="dt">x1 =</span> <span class="dv">3</span>, <span class="dt">x2 =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>)); <span class="co"># x 是矩陣</span>
f1&lt;-<span class="st"> </span><span class="cf">function</span>(col) {
   <span class="kw">c</span>(<span class="kw">min</span>(col),<span class="kw">max</span>(col)) 
 }

 <span class="kw">apply</span>(x,<span class="dv">2</span>,f1)</code></pre>
<pre style="border: 1px grey dotted;"><code>     x1 x2
[1,]  3  1
[2,]  3  6
</code></pre>
<p>練習：如果用for loop?
練習：哪種方式比較快？hint:利用 system.time(a function)</p>
</div>
<div id="lapply" class="section level3">
<h3><span class="header-section-number">2.19.2</span> lapply函數</h3>
<p>大綱：lapply(),sapply(),vapply() 都參數都吃list 或者vector。<br />
* lapply(), sapply()差別是 前者返回list,後者返回matrix;
* sapply(), vapply() 差別是，後者可以加入row names。</p>
<p>lapply 的參數是 list、data.frame，然後返回和X長度同樣的list結構作為結果。</p>
<p>函數定義：</p>
<pre><code>lapply(X, FUN, ...)</code></pre>
<p>參數列表：</p>
<ul>
<li>X: list、vector、data.frame</li>
<li>FUN: 自定義的調用函數</li>
<li>…: 更多參數，可選</li>
</ul>
<p>比如，計算list中的每個KEY對應 的5個Tukey分位數 (minimum, lower-hinge, median, upper-hinge, maximum) 。利用<code>fivenum()</code></p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">b =</span> <span class="kw">rnorm</span>(<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">8</span>));x</code></pre>
<pre style="border: 1px grey dotted;"><code>$a
[1] 1 2 3 4 5 6

$b
[1] -5.20  8.04
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lapply</span>(x,fivenum)</code></pre>
<pre style="border: 1px grey dotted;"><code>$a
[1] 1.0 2.0 3.5 5.0 6.0

$b
[1] -5.20 -5.20  1.42  8.04  8.04
</code></pre>
<p>如果傳入的參數是data.frame(),如下，對資料集的每個欄位求和。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lapply</span>(<span class="kw">data.frame</span>(x), sum)</code></pre>
<pre style="border: 1px grey dotted;"><code>$a
[1] 21

$b
[1] 8.53
</code></pre>
<p>note: 如果傳入的參數是矩陣，則會對每個元素求函數值。</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">10</span>),<span class="dt">nrow=</span><span class="dv">2</span>);x</code></pre>
<pre style="border: 1px grey dotted;"><code>       [,1] [,2]
[1,] -19.37 11.2
[2,]   4.94 16.5
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"> <span class="kw">lapply</span>(x, sum)</code></pre>
<pre style="border: 1px grey dotted;"><code>[[1]]
[1] -19.4

[[2]]
[1] 4.94

[[3]]
[1] 11.2

[[4]]
[1] 16.5
</code></pre>
</div>
<div id="sapply" class="section level3">
<h3><span class="header-section-number">2.19.3</span> sapply函數</h3>
<p>sapply函數包裹了一上面提到的<code>lapply()</code>，返回值為向量，而不是list對象。sapply增加了2個參數simplify和USE.NAMES，</p>
<p>函數定義：</p>
<pre><code>sapply(X, FUN, ..., simplify=TRUE, USE.NAMES = TRUE)</code></pre>
<p>參數列表：</p>
<ul>
<li>X: list、matrix、data.frame</li>
<li>FUN: 自定義的調用函數</li>
<li>…: 更多參數，可選</li>
<li>simplify: 預設為T,返為值為向量；如果是F成list。? 設定為“array”時，輸出結果按數組進行分組</li>
<li>USE.NAMES: 如果X為字符串，TRUE設置字符串為數據名，FALSE不設置</li>
</ul>
<p>note: 如果我們利用函數<code>unlist</code> 配合 lapply 的返回值，也可以得到向量，例如：
<code>unlist(lapply(1:3, function(x) x^2))</code></p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="dt">x1 =</span> <span class="dv">3</span>, <span class="dt">x2 =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>)); <span class="co"># x 是矩陣</span>
<span class="kw">sapply</span>(x, sum)  <span class="co">#結果類似lapply()</span></code></pre>
<pre style="border: 1px grey dotted;"><code> [1] 3 3 3 3 3 3 1 2 3 4 5 6
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># data.frame</span>
<span class="kw">sapply</span>(<span class="kw">data.frame</span>(x), sum)</code></pre>
<pre style="border: 1px grey dotted;"><code>x1 x2 
18 21 
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 確認返回類別</span>
<span class="kw">class</span>(<span class="kw">lapply</span>(x, sum))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "list"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">sapply</span>(x, sum))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "numeric"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">sapply</span>(x, sum, <span class="dt">simplify=</span><span class="ot">FALSE</span>, <span class="dt">USE.NAMES=</span><span class="ot">FALSE</span>))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "list"
</code></pre>
<p>說明書提到：simplify=FALSE和USE.NAMES=FALSE，則 sapply函數 ＝lapply函數。</p>
<p>練習：解釋下面的輸出結果。</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="dt">x1 =</span> <span class="dv">3</span>, <span class="dt">x2 =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>))
<span class="kw">sapply</span>(x, quantile)   </code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
0%      3    3    3    3    3    3    1    2    3     4     5     6
25%     3    3    3    3    3    3    1    2    3     4     5     6
50%     3    3    3    3    3    3    1    2    3     4     5     6
75%     3    3    3    3    3    3    1    2    3     4     5     6
100%    3    3    3    3    3    3    1    2    3     4     5     6
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, seq)</code></pre>
<pre style="border: 1px grey dotted;"><code>[[1]]
[1] 1 2

[[2]]
[1] 1 2 3

[[3]]
[1] 1 2 3 4
</code></pre>
<p>hint: sapply的調用函數lapply()，而已經知道lapply()的參數是矩陣的時候，每個元素都會被傳到函數。因此欄位有12個；又，每個quantile()傳回5個元素，因此，橫行有5個。
正確的作法是：</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">x1 =</span> <span class="dv">3</span>, <span class="dt">x2 =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>))
<span class="kw">sapply</span>(x, quantile)   </code></pre>
<pre style="border: 1px grey dotted;"><code>     x1   x2
0%    3 1.00
25%   3 2.25
50%   3 3.50
75%   3 4.75
100%  3 6.00
</code></pre>
<p>範例：USE.NAMES=TRUE</p>
<pre class="sourceCode r"><code class="sourceCode r">alist&lt;-<span class="kw">list</span>(<span class="dt">a=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>),<span class="dt">b=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>),<span class="dt">c=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">3</span>))
f2&lt;-<span class="cf">function</span>(x)
{
  <span class="kw">mean</span>(alist[[x]])
}
<span class="kw">sapply</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>),f2,<span class="dt">USE.NAMES =</span> T)</code></pre>
<pre style="border: 1px grey dotted;"><code>a b c 
1 2 3 
</code></pre>
<p>對於simplify為array時，我們可以參考下面的例子，構建一個三維數組，其中二個維度為方陣。</p>
<pre class="sourceCode r"><code class="sourceCode r">a&lt;-<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>
<span class="co"># 按數組分組</span>
<span class="kw">sapply</span>(a,<span class="cf">function</span>(x) <span class="kw">matrix</span>(x,<span class="dv">2</span>,<span class="dv">2</span>), <span class="dt">simplify=</span><span class="st">&#39;array&#39;</span>)</code></pre>
<pre style="border: 1px grey dotted;"><code>, , 1

     [,1] [,2]
[1,]    1    1
[2,]    1    1

, , 2

     [,1] [,2]
[1,]    2    2
[2,]    2    2
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 默認情況，則自動合併分組</span>
<span class="kw">sapply</span>(a,<span class="cf">function</span>(x) <span class="kw">matrix</span>(x,<span class="dv">2</span>,<span class="dv">2</span>))</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2]
[1,]    1    2
[2,]    1    2
[3,]    1    2
[4,]    1    2
</code></pre>
</div>
<div id="section-2.19.4" class="section level3">
<h3><span class="header-section-number">2.19.4</span> 比較</h3>
<table>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Arguments</th>
<th>Objective</th>
<th>Input</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>apply</td>
<td>apply(x, MARGIN, FUN)</td>
<td>Apply a function to the rows or columns or both</td>
<td>Data frame or matrix</td>
<td>vector, list, array</td>
</tr>
<tr class="even">
<td>lapply</td>
<td>lapply(X, FUN)</td>
<td>Apply a function to all the elements of the input</td>
<td>List, vector or data frame</td>
<td>list</td>
</tr>
<tr class="odd">
<td>sapply</td>
<td>sappy(X FUN)</td>
<td>Apply a function to all the elements of the input</td>
<td>List, vector or data frame</td>
<td>vector or matrix</td>
</tr>
</tbody>
</table>
<pre class="sourceCode r"><code class="sourceCode r">m&lt;-<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">3</span>);m</code></pre>
<pre style="border: 1px grey dotted;"><code>     [,1] [,2] [,3]
[1,]    1    1    1
[2,]    2    2    2
[3,]    3    3    3
[4,]    4    4    4
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="cf">function</span>(x) <span class="kw">mean</span>(m[,x]))</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 2.5 2.5 2.5
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">m&lt;-<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">3</span>);
<span class="kw">lapply</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="cf">function</span>(x) <span class="kw">mean</span>(m[,x]))</code></pre>
<pre style="border: 1px grey dotted;"><code>[[1]]
[1] 2.5

[[2]]
[1] 2.5

[[3]]
[1] 2.5
</code></pre>
</div>
<div id="vapply" class="section level3">
<h3><span class="header-section-number">2.19.5</span> vapply函數</h3>
<p>vapply類似於sapply，提供了FUN.VALUE參數，用來控制返回值的行名。</p>
<p>note: <code>sapply()</code> 配上<code>rownames&lt;-</code> 可以達到一樣的效果。</p>
<p>函數定義：</p>
<pre><code>vapply(X, FUN, FUN.VALUE, ..., USE.NAMES = TRUE)</code></pre>
<p>參數列表：</p>
<ul>
<li>X:數組、矩陣、數據框</li>
<li>FUN: 自定義的調用函數</li>
<li>FUN.VALUE: 可以記為對每一紀錄給名稱(e.g. row.names)</li>
<li>…: 更多參數，可選</li>
<li>USE.NAMES: 如果X為字符串，TRUE設置字符串為數據名，FALSE不設置</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">cbind</span>(<span class="dt">x1 =</span> <span class="dv">3</span>, <span class="dt">x2 =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>)); <span class="co"># x 是矩陣</span>
x&lt;-<span class="kw">data.frame</span>(x) <span class="co"># 不能是矩陣</span>
f1&lt;-<span class="st"> </span><span class="cf">function</span>(col) {
   <span class="kw">c</span>(<span class="kw">min</span>(col),<span class="kw">max</span>(col)) 
  
}
<span class="kw">vapply</span>(x,f1,<span class="dt">FUN.VALUE =</span> <span class="kw">c</span>(<span class="st">&quot;min&quot;</span>=<span class="dv">0</span>,<span class="st">&quot;max&quot;</span>=<span class="dv">0</span>)) <span class="co"># FUN.VALUE 是一個named vector</span></code></pre>
<pre style="border: 1px grey dotted;"><code>    x1 x2
min  3  1
max  3  6
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># vapply(x,f1,FUN.VALUE = c(&quot;min&quot;,&quot;max&quot;)) # 錯誤</span></code></pre>
</div>
<div id="mapply" class="section level3">
<h3><span class="header-section-number">2.19.6</span> mapply函數</h3>
<p>函數定義：</p>
<pre><code>mapply(FUN, ..., MoreArgs = NULL, SIMPLIFY = TRUE,USE.NAMES = TRUE)</code></pre>
<p>參數列表：</p>
<ul>
<li>FUN: 自定義的調用函數</li>
<li>…: 接收多個數據</li>
<li>MoreArgs: 參數列表</li>
<li>SIMPLIFY: 是否轉矩陣，當值array時，輸出結果按數組進行分組</li>
<li><p>USE.NAMES: 如果X為字符串，TRUE設置字符串為數據名，FALSE不設置</p></li>
<li>如果Fun=f(x)，則 mapply(f,a1,a2)的執行是：<br />
f(a1), f(a2)</li>
<li><p>如果Fun=f(x,y)，則 mapply(f,a1,a2)的執行是：<br />
f(a1, a2)</p></li>
</ul>
<p>比如，比較3個向量大小，按索引順序取較大的值。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1</span>)

<span class="co"># 定義3個向量</span>
x&lt;-<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
y&lt;-<span class="dv">5</span><span class="op">:-</span><span class="dv">4</span>
z&lt;-<span class="kw">round</span>(<span class="kw">runif</span>(<span class="dv">10</span>,<span class="op">-</span><span class="dv">5</span>,<span class="dv">5</span>))

<span class="co"># 按索引順序取較大的值。</span>
<span class="kw">mapply</span>(max,x,y,z)</code></pre>
<pre style="border: 1px grey dotted;"><code> [1]  5  4  3  4  5  6  7  8  9 10
</code></pre>
<p>再看一個例子，生成4個符合正態分佈的數據集，分別對應的均值和方差為c(1,10,100,1000)。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1</span>)

<span class="co"># 長度為4</span>
n&lt;-<span class="kw">rep</span>(<span class="dv">4</span>,<span class="dv">4</span>)

<span class="co"># m為均值，v為方差</span>
m&lt;-v&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">100</span>,<span class="dv">1000</span>)

<span class="co"># 生成4組數據，按列分組</span>
<span class="kw">mapply</span>(rnorm,n,m,v)</code></pre>
<pre style="border: 1px grey dotted;"><code>      [,1] [,2]  [,3]  [,4]
[1,] 0.374 13.3 157.6   379
[2,] 1.184  1.8  69.5 -1215
[3,] 0.164 14.9 251.2  2125
[4,] 2.595 17.4 139.0   955
</code></pre>
</div>
<div id="tapply" class="section level3">
<h3><span class="header-section-number">2.19.7</span> tapply函數</h3>
<p>tapply用於分組的循環計算，通過INDEX參數可以把數據集X進行分組，相當於group by的操作。</p>
<p>函數定義：</p>
<pre><code>tapply(X, INDEX, FUN = NULL, ..., simplify = TRUE)</code></pre>
<p>參數列表：</p>
<ul>
<li>X: 向量</li>
<li>INDEX: 用於分組的索引</li>
<li>FUN: 自定義的調用函數</li>
<li>…: 接收多個數據</li>
<li>simplify : 是否數組化，當值array時，輸出結果按數組進行分組</li>
</ul>
<p>比如，計算不同品種的鳶尾花的花瓣(iris)長度的均值。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 通過iris$Species品種進行分組</span>
<span class="kw">tapply</span>(iris<span class="op">$</span>Petal.Length,iris<span class="op">$</span>Species,mean)</code></pre>
<pre style="border: 1px grey dotted;"><code>    setosa versicolor  virginica 
      1.46       4.26       5.55 
</code></pre>
<p>分組求和的範例。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1</span>)
x&lt;-<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>

<span class="co"># 亂術分成3組，分別是0,1,2 </span>
t&lt;-<span class="kw">round</span>(<span class="kw">runif</span>(<span class="dv">10</span>,<span class="dv">1</span>,<span class="dv">100</span>)<span class="op">%%</span><span class="dv">2</span>);t</code></pre>
<pre style="border: 1px grey dotted;"><code> [1] 1 2 2 1 1 2 1 0 1 1
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 對x進行分組求和</span>
<span class="kw">tapply</span>(x,t,sum)</code></pre>
<pre style="border: 1px grey dotted;"><code> 0  1  2 
 8 36 11 
</code></pre>
</div>
<div id="rapply" class="section level3">
<h3><span class="header-section-number">2.19.8</span> rapply函數</h3>
</div>
<div id="eapply" class="section level3">
<h3><span class="header-section-number">2.19.9</span> eapply函數</h3>
<p>函數定義：</p>
<pre><code>eapply(env, FUN, ..., all.names = FALSE, USE.NAMES = TRUE)</code></pre>
<p>練習：<br />
1 把iris 每個欄位的加總列出
iris 有一個欄位是factor</p>

</div>
</div>
<div id="section-2.20" class="section level2">
<h2><span class="header-section-number">2.20</span> 相關操作</h2>
<p><a href="resources/practice1.R">practice1.R</a></p>
<div id="section-2.20.1" class="section level3">
<h3><span class="header-section-number">2.20.1</span> 問題:想要知道有甚麼資料庫可以用?</h3>
<p>例如， 想要知道資料庫裏面有沒有’mtcars’<br />
hint:
grep(‘pattern’,target)</p>
<pre class="sourceCode r"><code class="sourceCode r">l&lt;-<span class="kw">list</span>(<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>)
<span class="kw">grep</span>(<span class="st">&#39;a&#39;</span>,l)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 1
</code></pre>
<p>利用指令<code>data()</code>可以列出內建資料：</p>
<pre class="sourceCode r"><code class="sourceCode r">xx&lt;-<span class="kw">data</span>()</code></pre>
<p>xx 是甚麼?直接打入xx並沒有像其他變數一樣，在console顯示內容：</p>
<pre class="sourceCode r"><code class="sourceCode r">xx</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(xx)</code></pre>
<pre style="border: 1px grey dotted;"><code>List of 4
 $ title  : chr "Data sets"
 $ header : NULL
 $ results: chr [1:166, 1:4] "sm" "sm" "sm" "sm" ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:4] "Package" "LibPath" "Item" "Title"
 $ footer : chr "Use 'data(package = .packages(all.available = TRUE))'\nto list the data sets in all *available* packages."
 - attr(*, "class")= chr "packageIQR"
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.data.frame</span>(xx)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.list</span>(xx)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] TRUE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.table</span>(xx)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] FALSE
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(xx)</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "packageIQR"
</code></pre>
<p><code>class()</code>函數說明xx是一個packageIQR物件。<code>str()</code>可以看出是一個長度為4的list，其中results標籤，是一個字串矩陣，大小為104 x 4。其中4個欄位的名稱為：“Package” “LibPath” “Item” “Title”（如下）：</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(xx<span class="op">$</span>results)</code></pre>
<pre style="border: 1px grey dotted;"><code>     Package LibPath                                           Item      
[1,] "sm"    "/home/linchao/R/x86_64-pc-linux-gnu-library/3.5" "aircraft"
[2,] "sm"    "/home/linchao/R/x86_64-pc-linux-gnu-library/3.5" "airpc"   
[3,] "sm"    "/home/linchao/R/x86_64-pc-linux-gnu-library/3.5" "birth"   
[4,] "sm"    "/home/linchao/R/x86_64-pc-linux-gnu-library/3.5" "bissell" 
[5,] "sm"    "/home/linchao/R/x86_64-pc-linux-gnu-library/3.5" "bonions" 
[6,] "sm"    "/home/linchao/R/x86_64-pc-linux-gnu-library/3.5" "britpts" 
     Title                                                                                                                                                                   
[1,] "These data record six characteristics of aircraft designs which appeared during the twentieth century"                                                                 
[2,] "These data list the first two principal component scores from the aircraft data, which record six characteristics of aircraft designs throughout the twentieth century"
[3,] "Low birthweight in babies"                                                                                                                                             
[4,] "Flaws in cloth"                                                                                                                                                        
[5,] "Yield-density relationship for Brown Imperial Spanish onions"                                                                                                          
[6,] "Coastline of the UK and Ireland"                                                                                                                                       
</code></pre>
<p>如果覺得混亂,可以利用</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(xx<span class="op">$</span>results)</code></pre>
<p>因為是矩陣,所以不能以「$」得到Item的內容?</p>
<pre class="sourceCode r"><code class="sourceCode r">xx<span class="op">$</span>results<span class="op">$</span>Item</code></pre>
<pre style="color: red;"><code>Error in xx$results$Item:
  $ operator is invalid for atomic vectors
</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(xx<span class="op">$</span>results[,<span class="st">&#39;item&#39;</span>])</code></pre>
<pre style="color: red;"><code>Error in xx$results[, "item"]:
  下標超出邊界
</code></pre>
<p>為甚麼錯誤?<br />
因為大小寫,所以正確寫法為：</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(xx<span class="op">$</span>results[,<span class="st">&#39;Item&#39;</span>])</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] "aircraft" "airpc"    "birth"    "bissell"  "bonions"  "britpts" 
</code></pre>
<p>利用<code>grep()</code>可以拿到<code>mtcars</code>的位置：</p>
<pre class="sourceCode r"><code class="sourceCode r">idx&lt;-<span class="kw">grep</span>(<span class="st">&#39;mtcars&#39;</span>,xx<span class="op">$</span>results[,<span class="st">&#39;Item&#39;</span>])
idx</code></pre>
<pre style="border: 1px grey dotted;"><code>[1] 134
</code></pre>
<p>確認</p>
<pre class="sourceCode r"><code class="sourceCode r">xx<span class="op">$</span>results[idx,<span class="st">&#39;Item&#39;</span>]</code></pre>
<pre style="border: 1px grey dotted;"><code>    Item 
"mtcars" 
</code></pre>
</div>
</div>
<div id="section-2.21" class="section level2">
<h2><span class="header-section-number">2.21</span> 常見錯誤</h2>
<div id="error" class="section level3">
<h3><span class="header-section-number">2.21.1</span> error</h3>
<pre class="sourceCode r"><code class="sourceCode r">l0 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))
l0</code></pre>
<blockquote>
<p>錯誤念法<br />
l0等於一個列表list，裡面有三個元素，第一個元素是1，第二個元素是c(TRUE, FALSE)，第三個元素是c(“a”, “b”, “c”)</p>
</blockquote>
<blockquote>
<p>正確念法：<br />
正確念法 指派一個list給變數l0，裡面有三個元素，第一個元素是純量1，第二個元素是邏輯向量，長度為2，內容分別是TRUE, FALSE，第三個元素是字元向量，長度為3，內容分別是“a”, “b”, “c”</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(l1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>)</code></pre>
<blockquote>
<p>錯誤念法<br />
設定names(li)等於集合(“A”,“B”,“C”)</p>
</blockquote>
<blockquote>
<p>正確念法：<br />
將l1 這個list 的<strong>前3個</strong>元素名稱，分別指定為 A,B,C</p>
</blockquote>
</div>
<div id="error-1" class="section level3">
<h3><span class="header-section-number">2.21.2</span> error</h3>
<pre class="sourceCode r"><code class="sourceCode r">l1<span class="op">$</span>x &lt;-<span class="st"> </span><span class="ot">NULL</span></code></pre>
<blockquote>
<p>正確念法：<br />
刪除元素名為x的元素。</p>
</blockquote>
</div>
<div id="error-2" class="section level3">
<h3><span class="header-section-number">2.21.3</span> error</h3>
<pre class="sourceCode r"><code class="sourceCode r">l0 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))

l1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>), <span class="dt">z =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))
l1<span class="op">$</span>x
l1<span class="op">$</span>y
l1<span class="op">$</span>z
l1<span class="op">$</span>m</code></pre>
<blockquote>
<p>更正念法
建立list變數<code>l1</code>,名稱分別是x,y,z,內容分別是…….<br />
l1<span class="math inline">\(y 為邏輯向量 l1\)</span>z 為字元向量<br />
尤其是這句<br />
—-&gt; ?? l1 y產生兩次邏輯運算。?? &lt;—-
邏輯運算指的是 and, or
因此，應該說 l1$y 是邏輯向量，元素有2個。</p>
</blockquote>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regular-expression-syntax.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/type_Basic.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
